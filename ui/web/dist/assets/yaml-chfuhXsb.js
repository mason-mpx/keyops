import{H as c}from"./index-OJNN34VQ.js";async function i(r,n,o){const a=new URLSearchParams;r.clusterId&&a.append("cluster_id",r.clusterId),r.namespace&&a.append("namespace",r.namespace),a.append("resource_type",n),a.append("resource_name",o);const e=await c.get(`/api/v1/kube/yaml?${a.toString()}`,{responseType:"text"});return typeof e.data=="string"?e.data:e.data?.data||e.data}async function d(r,n,o,a){await c.put("/api/v1/kube/yaml",{cluster_id:r.clusterId,cluster_name:r.clusterName,namespace:r.namespace,resource_type:n,resource_name:o,yaml:a})}async function p(r,n,o,a){if(!a||!a.trim())throw new Error("YAML 内容不能为空");if(!n)throw new Error("资源类型不能为空");if(!o)throw new Error("资源名称不能为空");try{const e={cluster_id:r.clusterId||"",cluster_name:r.clusterName||"",namespace:r.namespace||"",resource_type:n,resource_name:o,yaml:a},t=await c.post("/api/v1/kube/yaml/dry-run",e,{responseType:"text"});let s="";if(typeof t.data=="string"?s=t.data:t.data?.data&&typeof t.data.data=="string"?s=t.data.data:t.data&&(s=String(t.data)),!s||!s.trim())throw new Error("Dry-run 返回结果为空，可能是 YAML 格式错误或 Kubernetes API 返回空响应");return s}catch(e){if(e instanceof Error&&e.message.includes("Dry-run 返回结果为空"))throw e;const t=e,s=typeof e=="object"&&e!==null&&t.response&&t.response.data&&"message"in t.response.data?t.response.data.message:e instanceof Error?e.message:"Dry-run 执行失败";throw new Error(s)}}export{p as d,i as g,d as u};
