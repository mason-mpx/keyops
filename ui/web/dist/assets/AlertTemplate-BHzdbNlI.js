import{u as we,r as c,b4 as H,j as t,B as u,w as Ie,x as Ae,T as h,a as y,v as De,A as ke,P as Ee,d as F,I as B,g as $e,h as Ne,i as Pe,k as Oe,l as ze,m as b,b as C,cz as Me,a3 as Ue,a4 as de,bb as he,C as ue,a7 as w,ck as We,cH as Le,_ as He,p as Fe,bf as R}from"./index-Cih9_E47.js";import{a as p}from"./alertApi-31gYUd4n.js";import{S as _}from"./Stack-BT7SRYf3.js";import{T as Be,a as Re,b as Ge,c as E,d as m,e as Je}from"./TableRow-Bl_73t-R.js";import{C as G}from"./Chip-D6-9bdkU.js";import{P as qe}from"./Pagination-B3Cgsyn8.js";import{A as J}from"./Autocomplete-BhDNaxBI.js";import{S as Ve}from"./Switch-B8rvS-m9.js";import"./LastPage-BDzvmy5H.js";function st(){const{t:a}=we(),[q,V]=c.useState([]),[K,Q]=c.useState(!1),[me,X]=c.useState(!1),[S,$]=c.useState(null),[N,pe]=c.useState(1),[P]=c.useState(10),[Y,ge]=c.useState(0),[Z,fe]=c.useState("visual"),[ee,xe]=c.useState(!1),[O,te]=c.useState([]),[je,ne]=c.useState(!1),[o,g]=c.useState({template_name:"",template_desc:"",channels:{},members:[],alert_groups:[],enable:!0}),[z,x]=c.useState({}),[ae,se]=c.useState({}),[re,v]=c.useState([]),[M,U]=c.useState(new Map),[I,A]=c.useState(!1),[le,ye]=c.useState(""),[D,ie]=c.useState([]),[W,oe]=c.useState(!1),be=async()=>{try{oe(!0);const e=await p.getAlertGroups({page:1,page_size:1e3});(e.data.code===0||e.data.code===200)&&ie(e.data.data||[])}catch(e){console.error("加载告警组列表失败:",e),ie([])}finally{oe(!1)}},k=c.useCallback(async()=>{A(!0);try{const n=(await H.getUsersWithPagination({page:1,pageSize:20})).users||[];v(n),U(s=>{const r=new Map(s);return n.forEach(i=>{r.set(i.id,i)}),r})}catch(e){console.error("加载用户列表失败:",e),v([])}finally{A(!1)}},[]),Ce=c.useCallback(async e=>{if(!e||e.trim().length===0){await k();return}A(!0);try{const s=(await H.getUsersWithPagination({page:1,pageSize:20,keyword:e.trim()})).users||[];v(s),U(r=>{const i=new Map(r);return s.forEach(l=>{i.set(l.id,l)}),i})}catch(n){console.error("搜索用户失败:",n),v([])}finally{A(!1)}},[k]),_e=async()=>{try{ne(!0);const e=await p.getChannels({page:1,page_size:1e3});(e.data.code===0||e.data.code===200)&&te(e.data.data||[])}catch(e){console.error("获取告警渠道失败:",e),te([])}finally{ne(!1)}},T=c.useCallback(async()=>{try{Q(!0);const e=await p.getTemplates({page:N,page_size:P});(e.data.code===0||e.data.code===200)&&(V(e.data.data||[]),ge(e.data.total||0))}catch(e){console.error("获取告警模板失败:",e),V([])}finally{Q(!1)}},[N,P]);c.useEffect(()=>{T(),be(),_e()},[T]);const ce=async e=>{if(await k(),e){$(e),g({template_name:e.template_name,template_desc:e.template_desc||"",channels:e.channels||{},members:Array.isArray(e.members)?e.members.map(n=>String(n)):[],alert_groups:Array.isArray(e.alert_groups)?e.alert_groups:[],enable:e.enable});try{const n=await p.getChannelTemplates(e.id);if(n.data.code===0||n.data.code===200){const s={};n.data.data.forEach(r=>{r.channel_id&&(s[r.channel_id]=r.content||"")}),x(s)}else x({})}catch(n){console.error("加载渠道模板内容失败:",n),x({})}if(Array.isArray(e.members)&&e.members.length>0)try{const s=(await H.getUsersWithPagination({page:1,pageSize:1e3})).users||[];U(r=>{const i=new Map(r);return s.forEach(l=>{i.set(l.id,l);const d=parseInt(l.id,10);isNaN(d)||i.set(String(d),l)}),i}),v(s)}catch(n){console.error("加载成员信息失败:",n)}}else $(null),g({template_name:"",template_desc:"",channels:{},members:[],alert_groups:[],enable:!0}),x({});se({}),X(!0)},L=()=>{X(!1),$(null)},Se=e=>{if(!e||typeof e!="object")return null;const n=new Map(O.map(r=>[r.id,r])),s=[];for(const[r,i]of Object.entries(e))if(Array.isArray(i))for(const l of i)n.has(l)||s.push(`${r}: ${l}`);return s.length>0?a("Invalid channel IDs")||`无效的渠道ID: ${s.join(", ")}`:null},ve=async()=>{if(!o.template_name){R(a("Please fill in template name")||"请填写模板名称");return}const e=Se(o.channels);if(e){R(e);return}try{let n;if(S)await p.updateTemplate(S.id,o),n=S.id,w(a("Update successful")||"更新成功");else{const l=await p.createTemplate(o);if(!l.data.data||!l.data.data.id)throw new Error("创建模板失败：未返回模板ID");n=l.data.data.id,w(a("Create successful")||"创建成功")}const s=new Set;o.channels&&typeof o.channels=="object"&&Object.values(o.channels).forEach(l=>{Array.isArray(l)&&l.forEach(d=>s.add(d))});const r=Array.from(s),i=r.map(async l=>{const d=z[l]||"",j=d.trim().length>0;try{await p.updateChannelTemplate(n,l,d,j)}catch(f){console.error(`保存渠道 ${l} 的模板内容失败:`,f)}});if(await Promise.all(i),S)try{const l=await p.getChannelTemplates(n);if(l.data.code===0||l.data.code===200){const d=new Set(r),j=l.data.data.filter(f=>f.channel_id&&!d.has(f.channel_id)).map(f=>f.channel_id?p.deleteChannelTemplate(n,f.channel_id):Promise.resolve());await Promise.all(j)}}catch(l){console.error("清理渠道模板内容失败:",l)}L(),T()}catch(n){console.error("保存失败:",n),R(n?.response?.data?.message||a("Save failed")||"保存失败")}},Te=async e=>{if(confirm(a("Are you sure you want to delete this template?")||"确定要删除这个告警模板吗？"))try{await p.deleteTemplate(e),w(a("Delete successful")||"删除成功"),T()}catch(n){console.error("删除失败:",n)}};return t.jsxs(u,{sx:{p:3},children:[t.jsx(Ie,{children:t.jsxs(Ae,{children:[t.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(h,{variant:"h5",gutterBottom:!0,children:a("menu.monitorAlertTemplate")||"告警模板管理"}),t.jsxs(_,{direction:"row",spacing:2,children:[t.jsx(y,{variant:"outlined",startIcon:t.jsx(De,{}),onClick:T,disabled:K,children:a("common.refresh")}),t.jsx(y,{variant:"contained",startIcon:t.jsx(ke,{}),onClick:()=>ce(),children:a("Create Template")})]})]}),t.jsx(Be,{component:Ee,children:t.jsxs(Re,{children:[t.jsx(Ge,{children:t.jsxs(E,{children:[t.jsx(m,{children:a("Template Name")}),t.jsx(m,{children:a("Description")}),t.jsx(m,{children:a("Channels")}),t.jsx(m,{children:a("common.status")}),t.jsx(m,{children:a("Created At")}),t.jsx(m,{align:"right",children:a("common.actions")})]})}),t.jsx(Je,{children:K?t.jsx(E,{children:t.jsx(m,{colSpan:6,align:"center",children:a("common.loading")})}):q.length===0?t.jsx(E,{children:t.jsx(m,{colSpan:6,align:"center",children:a("common.noData")})}):q.map(e=>t.jsxs(E,{children:[t.jsx(m,{children:e.template_name}),t.jsx(m,{children:e.template_desc||"-"}),t.jsx(m,{children:t.jsx(h,{variant:"body2",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis"},children:JSON.stringify(e.channels||{})})}),t.jsx(m,{children:t.jsx(G,{label:e.enable?a("common.enabled"):a("common.disabled"),color:e.enable?"success":"default",size:"small"})}),t.jsx(m,{children:(()=>{const n=e.createdAt||e.created_at;if(!n)return"-";try{const s=new Date(n);return isNaN(s.getTime())?"-":s.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return"-"}})()}),t.jsx(m,{align:"right",children:t.jsxs(_,{direction:"row",spacing:1,justifyContent:"flex-end",children:[t.jsx(F,{title:a("common.edit"),children:t.jsx(B,{size:"small",onClick:()=>ce(e),children:t.jsx($e,{fontSize:"small"})})}),t.jsx(F,{title:a("common.delete"),children:t.jsx(B,{size:"small",color:"error",onClick:()=>Te(e.id),children:t.jsx(Ne,{fontSize:"small"})})})]})})]},e.id))})]})}),Y>0&&t.jsx(u,{sx:{display:"flex",justifyContent:"center",mt:2},children:t.jsx(qe,{count:Math.ceil(Y/P),page:N,onChange:(e,n)=>pe(n),color:"primary"})})]})}),t.jsxs(Pe,{open:me,onClose:L,maxWidth:"md",fullWidth:!0,children:[t.jsx(Oe,{children:S?a("Edit Template")||"编辑告警模板":a("Create Template")||"新建告警模板"}),t.jsx(ze,{children:t.jsxs(_,{spacing:3,sx:{mt:1},children:[t.jsx(b,{label:`${a("Template Name")} *`,value:o.template_name,onChange:e=>g({...o,template_name:e.target.value}),fullWidth:!0,required:!0}),t.jsx(b,{label:a("Description"),value:o.template_desc||"",onChange:e=>g({...o,template_desc:e.target.value}),fullWidth:!0,multiline:!0,rows:2,helperText:a("Template Description Helper")||"模板描述，用于说明该模板的用途和适用场景"}),t.jsxs(C,{severity:"info",sx:{mb:1},children:[t.jsx(h,{variant:"body2",children:t.jsx("strong",{children:a("Template Configuration Note")||"模板配置说明："})}),t.jsx(h,{variant:"body2",sx:{mt:.5},children:a("Template Configuration Step 1")||'1. 首先选择需要绑定的通知渠道（下方"渠道配置"部分）'}),t.jsx(h,{variant:"body2",sx:{mt:.5},children:a("Template Configuration Step 2")||"2. 模板内容（消息格式）需要在创建模板后，通过编辑功能为每个渠道单独配置"}),t.jsx(h,{variant:"body2",sx:{mt:.5},children:a("Template Configuration Step 3")||"3. 模板内容支持变量，例如：{{alert_title}}、{{alert_level}}、{{description}} 等"})]}),t.jsxs(u,{children:[t.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(h,{variant:"subtitle2",children:a("Channels")||"渠道配置"}),t.jsx(F,{title:a("Channels Help")||"渠道配置说明",children:t.jsx(B,{size:"small",onClick:()=>xe(!ee),sx:{color:"primary.main"},children:t.jsx(Me,{fontSize:"small"})})})]}),t.jsxs(Ue,{value:Z,onChange:(e,n)=>fe(n),sx:{minHeight:"auto"},children:[t.jsx(de,{label:a("Visual")||"可视化",value:"visual",sx:{minHeight:"auto",py:.5,px:1}}),t.jsx(de,{label:"JSON",value:"json",sx:{minHeight:"auto",py:.5,px:1}})]})]}),t.jsx(he,{in:ee,timeout:"auto",unmountOnExit:!0,children:t.jsxs(C,{severity:"info",sx:{mb:2},children:[t.jsx(h,{variant:"body2",paragraph:!0,children:t.jsx("strong",{children:a("Channels Explanation")||"渠道配置说明："})}),t.jsx(h,{variant:"body2",paragraph:!0,children:a("Channels Description")||"告警模板的渠道配置用于定义该模板绑定的通知渠道。选择需要使用的渠道后，系统会使用该模板发送告警通知。"}),t.jsxs(h,{variant:"body2",paragraph:!0,children:[t.jsx("strong",{children:a("Template Content Note")||"模板内容说明："}),a("Template Content Description")||"模板内容（消息格式）需要在创建模板后，通过编辑功能为每个渠道单独配置。每个渠道可以配置不同的消息格式和内容。"]}),t.jsx(h,{variant:"body2",component:"div",sx:{fontFamily:"monospace",bgcolor:"grey.100",p:1,borderRadius:1,mt:1},children:`{
  "feishu": [1, 2],
  "dingtalk": [3],
  "email": [4, 5]
}`}),t.jsx(h,{variant:"body2",sx:{mt:1},children:a("Channels Example")||"示例：上面的配置表示该模板绑定飞书渠道ID 1和2，钉钉渠道ID 3，邮件渠道ID 4和5。"})]})}),Z==="json"?t.jsx(b,{label:a("Channels (JSON)"),value:JSON.stringify(o.channels||{},null,2),onChange:e=>{try{const n=JSON.parse(e.target.value);g({...o,channels:n})}catch{}},fullWidth:!0,multiline:!0,rows:6,helperText:a("Channels configuration in JSON format")||'渠道配置（JSON格式），例如：{"feishu": [1, 2], "dingtalk": [3]}'}):t.jsx(u,{children:je?t.jsx(C,{severity:"info",children:a("common.loading")||"加载渠道中..."}):t.jsx(_,{spacing:2,children:["feishu","dingtalk","wechat","email","sms","webhook"].map(e=>{const n=e==="feishu"?a("Feishu")||"飞书":e==="dingtalk"?a("DingTalk")||"钉钉":e==="wechat"?a("WeChat")||"企业微信":e==="email"?a("Email")||"邮件":e==="sms"?a("SMS")||"短信":e==="webhook"?a("Webhook")||"Webhook":e,s=O.filter(l=>l.channel_type===e),r=o.channels,i=Array.isArray(r?.[e])?r[e]:[];return t.jsxs(u,{children:[t.jsx(J,{multiple:!0,options:s,getOptionLabel:l=>`${l.channel_name} (ID: ${l.id})`,value:s.filter(l=>i.includes(l.id)),onChange:(l,d)=>{const j={...o.channels||{}};d.length===0?delete j[e]:j[e]=d.map(f=>f.id),g({...o,channels:j})},renderInput:l=>t.jsx(b,{...l,label:`${n} ${a("Channels")||"渠道"}`,placeholder:a("Select channels")||"选择渠道"}),renderOption:(l,d)=>c.createElement(u,{component:"li",...l,key:d.id},t.jsxs(u,{children:[t.jsx(h,{variant:"body2",children:d.channel_name}),t.jsxs(h,{variant:"caption",color:"text.secondary",children:[a("Channel Type")||"类型",": ",d.channel_type," | ID: ",d.id]})]})),disabled:s.length===0,noOptionsText:a("No channels available")||"暂无可用渠道"}),s.length===0&&t.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:a("No channels of this type")||`暂无${n}类型的渠道`})]},e)})})})]}),t.jsxs(u,{sx:{mt:3},children:[t.jsx(h,{variant:"h6",gutterBottom:!0,children:a("Notification Configuration")||"通知配置"}),t.jsx(C,{severity:"info",sx:{mb:2},children:t.jsx(h,{variant:"body2",children:a("Notification Configuration Note")||"配置通知成员和告警组。这些配置将与模板绑定，当策略使用该模板时，会通知配置的成员和告警组。"})}),t.jsxs(_,{spacing:2,children:[t.jsx(J,{multiple:!0,size:"small",options:re,getOptionLabel:e=>{if(typeof e=="object"&&e!==null)return e.username||e.fullName||e.id||"未知用户";const n=M.get(String(e));return n?n.username||n.fullName||n.id:e&&e!==0&&e!=="0"?`用户ID: ${e}`:"未知用户"},isOptionEqualToValue:(e,n)=>{if(typeof e=="object"&&e!==null&&typeof n=="object"&&n!==null){const s=String(e.id||""),r=String(n.id||"");return s===r}if(typeof e=="object"&&e!==null){const s=String(e.id||""),r=String(n||"");return s===r}if(typeof n=="object"&&n!==null){const s=String(e||""),r=String(n.id||"");return s===r}return String(e)===String(n)},value:(Array.isArray(o.members)?o.members:[]).filter(n=>n&&n!==""&&n!==0).map(n=>{const s=String(n),r=M.get(s);return r||{id:s,username:"",fullName:""}}).filter(n=>n&&n.id),onChange:(e,n)=>{console.log("onChange newValue:",n);const s=n.map(r=>typeof r=="object"&&r!==null&&r.id?String(r.id):typeof r=="string"?r:typeof r=="number"&&r>0?String(r):null).filter(r=>r!==null&&r!=="");console.log("onChange memberIds:",s),g({...o,members:s})},inputValue:le,onInputChange:(e,n)=>{ye(n),Ce(n)},onOpen:()=>{!I&&re.length===0&&k()},loading:I,noOptionsText:I?a("common.loading")||"加载中...":le?a("No users found")||"未找到用户":a("Enter username to search")||"输入用户名搜索",filterOptions:e=>e,renderInput:e=>t.jsx(b,{...e,label:a("Notification Members")||"通知成员",placeholder:a("Enter username to search")||"输入用户名搜索",InputProps:{...e.InputProps,endAdornment:t.jsxs(t.Fragment,{children:[I?t.jsx(ue,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),renderTags:(e,n)=>e.map((s,r)=>{const i=typeof s=="object"?s:M.get(String(s));let l;if(i)l=i.username||i.fullName||i.id||"未知用户";else if(typeof s=="number"&&s!==0)l=`用户ID: ${s}`;else if(typeof s=="object"&&s!==null){const d=s?.id;l=d&&d!=="0"?`用户ID: ${d}`:"未知用户"}else l=s&&s!==0&&s!=="0"?`用户ID: ${s}`:"未知用户";return c.createElement(G,{...n({index:r}),key:typeof s=="object"?s.id:String(s),label:l,size:"small"})})}),t.jsx(J,{multiple:!0,size:"small",options:D,getOptionLabel:e=>{if(typeof e=="object")return e.group_name||String(e.id);const n=D.find(s=>s.id===e);return n?n.group_name:String(e)},isOptionEqualToValue:(e,n)=>typeof e=="object"&&typeof n=="object"?e.id===n.id:typeof e=="object"&&typeof n=="number"?e.id===n:typeof e=="number"&&typeof n=="object"?e===n.id:e===n,value:(Array.isArray(o.alert_groups)?o.alert_groups:[]).map(n=>D.find(r=>r.id===n)||n),onChange:(e,n)=>{const s=n.map(r=>typeof r=="object"?r.id:r);g({...o,alert_groups:s})},loading:W,noOptionsText:W?a("common.loading")||"加载中...":a("No alert groups found")||"暂无告警组",renderInput:e=>t.jsx(b,{...e,label:a("Alert Groups")||"告警组",placeholder:a("Select alert groups")||"选择告警组",InputProps:{...e.InputProps,endAdornment:t.jsxs(t.Fragment,{children:[W?t.jsx(ue,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),renderTags:(e,n)=>e.map((s,r)=>{const i=typeof s=="object"?s:D.find(d=>d.id===s),l=i?i.group_name:String(s);return c.createElement(G,{...n({index:r}),key:typeof s=="object"?s.id:String(s),label:l,size:"small"})})})]})]}),t.jsxs(u,{sx:{mt:3},children:[t.jsx(h,{variant:"h6",gutterBottom:!0,children:a("Template Content Configuration")||"模板内容配置"}),t.jsx(C,{severity:"info",sx:{mb:2},children:t.jsx(h,{variant:"body2",paragraph:!0,children:a("Template Content Configuration Note")||"为每个选中的渠道配置消息格式。模板内容支持变量，例如：{{alert_title}}、{{alert_level}}、{{description}}、{{trigger_time}} 等。"})}),(()=>{const e=[];return o.channels&&typeof o.channels=="object"&&Object.values(o.channels).forEach(n=>{Array.isArray(n)&&e.push(...n)}),e.length===0?t.jsx(C,{severity:"warning",children:a("Please select channels first")||"请先选择渠道"}):t.jsx(_,{spacing:2,children:e.map(n=>{const s=O.find(i=>i.id===n);if(!s)return null;const r=s.channel_type==="feishu"?a("Feishu")||"飞书":s.channel_type==="dingtalk"?a("DingTalk")||"钉钉":s.channel_type==="wechat"?a("WeChat")||"企业微信":s.channel_type==="email"?a("Email")||"邮件":s.channel_type==="sms"?a("SMS")||"短信":s.channel_type==="webhook"?a("Webhook")||"Webhook":s.channel_type;return t.jsxs(u,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,p:2},children:[t.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t.jsxs(h,{variant:"subtitle1",children:[s.channel_name," (",r,")"]}),t.jsx(y,{size:"small",onClick:()=>se(i=>({...i,[n]:!i[n]})),children:ae[n]?a("Collapse")||"收起":a("Expand")||"展开"})]}),t.jsxs(he,{in:ae[n],children:[t.jsxs(u,{sx:{mb:1,display:"flex",gap:1,justifyContent:"flex-end"},children:[t.jsx(y,{size:"small",startIcon:t.jsx(We,{}),onClick:()=>{const i=`告警标题：{{alert_title}}

告警等级：P{{alert_level}}
告警描述：{{description}}
触发时间：{{trigger_time}}
数据源：{{source_name}}
告警ID：{{alert_id}}
${s.channel_type==="email"?`告警状态：{{alert_status}}
`:""}${s.channel_type==="feishu"||s.channel_type==="dingtalk"||s.channel_type==="wechat"?`详情链接：{{alert_url}}
`:""}
处理建议：
请及时查看告警详情并处理，如已处理请在系统中标记为已解决。`;navigator.clipboard.writeText(i).then(()=>{w(a("Example copied to clipboard")||"示例已复制到剪贴板")}).catch(()=>{x(l=>({...l,[n]:i}))})},children:a("Copy Example")||"复制示例"}),t.jsx(y,{size:"small",startIcon:t.jsx(Le,{}),onClick:()=>{const l=(z[n]||"").replace(/\n{3,}/g,`

`).replace(/(\{\{[^}]+\}\})/g,`$1
`).replace(/[ \t]+$/gm,"").replace(/\n{3,}/g,`

`).trim();x(d=>({...d,[n]:l})),w(a("Content beautified")||"内容已美化")},children:a("Beautify")||"一键美化"})]}),t.jsx(b,{label:a("Template Content")||"模板内容",value:z[n]||"",onChange:i=>x(l=>({...l,[n]:i.target.value})),fullWidth:!0,multiline:!0,rows:10,placeholder:`告警标题：{{alert_title}}

告警等级：P{{alert_level}}
告警描述：{{description}}
触发时间：{{trigger_time}}
数据源：{{source_name}}
告警ID：{{alert_id}}
${s.channel_type==="email"?`告警状态：{{alert_status}}
`:""}${s.channel_type==="feishu"||s.channel_type==="dingtalk"||s.channel_type==="wechat"?`详情链接：{{alert_url}}
`:""}
处理建议：
请及时查看告警详情并处理，如已处理请在系统中标记为已解决。`,helperText:t.jsxs(u,{children:[t.jsx(h,{variant:"caption",display:"block",sx:{mb:.5},children:t.jsxs("strong",{children:[a("Available Variables")||"可用变量","："]})}),t.jsx(h,{variant:"caption",component:"div",sx:{fontFamily:"monospace",mt:.5,fontSize:"0.75rem",lineHeight:1.6},children:`{{alert_title}} - ${a("Alert Title")||"告警标题"}
{{alert_level}} - ${a("Alert Level")||"告警等级（数字）"}
{{alert_level_name}} - ${a("Alert Level Name")||"告警等级名称（P0/P1/P2等）"}
{{description}} - ${a("Description")||"告警描述"}
{{trigger_time}} - ${a("Trigger Time")||"触发时间"}
{{alert_status}} - ${a("Alert Status")||"告警状态（firing/resolved）"}
{{source_name}} - ${a("Source Name")||"数据源名称"}
{{alert_id}} - ${a("Alert ID")||"告警ID"}
{{alert_url}} - ${a("Alert URL")||"告警详情链接"}
{{first_trigger_time}} - ${a("First Trigger Time")||"首次触发时间"}
{{recover_time}} - ${a("Recover Time")||"恢复时间"}
{{source_ip}} - ${a("Source IP")||"来源IP"}
{{department_id}} - ${a("Department ID")||"部门ID"}`}),t.jsx(h,{variant:"caption",display:"block",sx:{mt:1,color:"text.secondary"},children:s.channel_type==="feishu"||s.channel_type==="dingtalk"||s.channel_type==="wechat"?a("Template Tips Markdown")||"提示：此渠道支持 Markdown 格式（如 **粗体**、*斜体*、代码块等）":s.channel_type==="email"||s.channel_type==="sms"?a("Template Tips Plain")||"提示：此渠道仅支持纯文本格式，Markdown 格式不会被渲染":a("Template Tips")||"提示：支持使用变量"})]})})]})]},n)})})})()]}),t.jsx(He,{control:t.jsx(Ve,{checked:o.enable??!0,onChange:e=>g({...o,enable:e.target.checked})}),label:a("common.enabled")})]})}),t.jsxs(Fe,{children:[t.jsx(y,{onClick:L,children:a("common.cancel")}),t.jsx(y,{onClick:ve,variant:"contained",children:a("common.save")})]})]})]})}export{st as default};
