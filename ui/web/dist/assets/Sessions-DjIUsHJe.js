const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/asciinema-player-DXeTZHQs.css"])))=>i.map(i=>d[i]);
import{r as l,aE as kt,aF as ke,aG as St,aH as Pt,aI as qe,aJ as $e,aK as Xe,aL as tt,aM as Ne,aj as wt,ak as jt,j as t,an as Pe,al as Ct,aN as Tt,am as ae,af as ge,aO as ie,ao as Rt,ah as xe,aP as Qe,aQ as ft,aR as ot,B as E,I as B,aS as gt,aT as Ze,f as et,aU as mt,aV as ht,C as Se,b as It,T as D,aW as Lt,aX as At,aY as Et,aZ as Mt,u as zt,aC as Je,v as Dt,w as rt,x as nt,m as Ft,s as Ht,t as $t,d as Nt,a_ as Vt,a$ as st,i as Ot,k as Gt,aB as Wt,l as _t}from"./index-DNdAKB9f.js";import{G as at}from"./guacamole-common-DCnKliOq.js";import{L as Bt}from"./LinearProgress-D7X3LLHa.js";import{T as Ut,a as Yt,b as Kt,c as it,d as W,e as qt}from"./TableRow-2FuGKbnY.js";import{C as Me}from"./Chip-B8lB6W_F.js";import{T as Xt}from"./TablePagination-CykxsR0-.js";import"./LastPage-v7sA_Lnn.js";const Jt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Qt(e,o,s=(i,x)=>i===x){return e.length===o.length&&e.every((i,x)=>s(i,o[x]))}const Zt=2;function ye(e,o,s,i,x){return s===1?Math.min(e+o,x):Math.max(e-o,i)}function yt(e,o){return e-o}function lt(e,o){const{index:s}=e.reduce((i,x,p)=>{const F=Math.abs(o-x);return i===null||F<i.distance||F===i.distance?{distance:F,index:p}:i},null)??{};return s}function ze(e,o){if(o.current!==void 0&&e.changedTouches){const s=e;for(let i=0;i<s.changedTouches.length;i+=1){const x=s.changedTouches[i];if(x.identifier===o.current)return{x:x.clientX,y:x.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ve(e,o,s){return(e-o)*100/(s-o)}function eo(e,o,s){return(s-o)*e+o}function to(e){if(Math.abs(e)<1){const s=e.toExponential().split("e-"),i=s[0].split(".")[1];return(i?i.length:0)+parseInt(s[1],10)}const o=e.toString().split(".")[1];return o?o.length:0}function oo(e,o,s){const i=Math.round((e-s)/o)*o+s;return Number(i.toFixed(to(o)))}function ct({values:e,newValue:o,index:s}){const i=e.slice();return i[s]=o,i.sort(yt)}function De({sliderRef:e,activeIndex:o,setActive:s}){const i=$e(e.current);(!e.current?.contains(i.activeElement)||Number(i?.activeElement?.getAttribute("data-index"))!==o)&&e.current?.querySelector(`[type="range"][data-index="${o}"]`).focus(),s&&s(o)}function Fe(e,o){return typeof e=="number"&&typeof o=="number"?e===o:typeof e=="object"&&typeof o=="object"?Qt(e,o):!1}const ro={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},no=e=>e;let He;function dt(){return He===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?He=CSS.supports("touch-action","none"):He=!0),He}function so(e){const{"aria-labelledby":o,defaultValue:s,disabled:i=!1,disableSwap:x=!1,isRtl:p=!1,marks:F=!1,max:b=100,min:m=0,name:R,onChange:N,onChangeCommitted:G,orientation:H="horizontal",rootRef:V,scale:d=no,step:c=1,shiftStep:I=10,tabIndex:h,value:M}=e,S=l.useRef(void 0),[f,w]=l.useState(-1),[K,L]=l.useState(-1),[X,re]=l.useState(!1),Z=l.useRef(0),u=l.useRef(null),[y,n]=kt({controlled:M,default:s??m,name:"Slider"}),g=N&&((a,r,v)=>{const C=a.nativeEvent||a,j=new C.constructor(C.type,C);Object.defineProperty(j,"target",{writable:!0,value:{value:r,name:R}}),u.current=r,N(j,r,v)}),T=Array.isArray(y);let P=T?y.slice().sort(yt):[y];P=P.map(a=>a==null?m:ke(a,m,b));const ee=F===!0&&c!==null?[...Array(Math.floor((b-m)/c)+1)].map((a,r)=>({value:m+c*r})):F||[],z=ee.map(a=>a.value),[se,me]=l.useState(-1),A=l.useRef(null),le=St(V,A),Oe=a=>r=>{const v=Number(r.currentTarget.getAttribute("data-index"));tt(r.target)&&me(v),L(v),a?.onFocus?.(r)},Ge=a=>r=>{tt(r.target)||me(-1),L(-1),a?.onBlur?.(r)},we=(a,r)=>{const v=Number(a.currentTarget.getAttribute("data-index")),C=P[v],j=z.indexOf(C);let k=r;if(ee&&c==null){const q=z[z.length-1];k>=q?k=q:k<=z[0]?k=z[0]:k=k<C?z[j-1]:z[j+1]}if(k=ke(k,m,b),T){x&&(k=ke(k,P[v-1]||-1/0,P[v+1]||1/0));const q=k;k=ct({values:P,newValue:k,index:v});let J=v;x||(J=k.indexOf(q)),De({sliderRef:A,activeIndex:J})}n(k),me(v),g&&!Fe(k,y)&&g(a,k,v),G&&G(a,u.current??k)},We=a=>r=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(r.key)){r.preventDefault();const v=Number(r.currentTarget.getAttribute("data-index")),C=P[v];let j=null;if(c!=null){const k=r.shiftKey?I:c;switch(r.key){case"ArrowUp":j=ye(C,k,1,m,b);break;case"ArrowRight":j=ye(C,k,p?-1:1,m,b);break;case"ArrowDown":j=ye(C,k,-1,m,b);break;case"ArrowLeft":j=ye(C,k,p?1:-1,m,b);break;case"PageUp":j=ye(C,I,1,m,b);break;case"PageDown":j=ye(C,I,-1,m,b);break;case"Home":j=m;break;case"End":j=b;break}}else if(ee){const k=z[z.length-1],q=z.indexOf(C),J=[p?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],O=[p?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];J.includes(r.key)?q===0?j=z[0]:j=z[q-1]:O.includes(r.key)&&(q===z.length-1?j=k:j=z[q+1])}j!=null&&we(r,j)}a?.onKeyDown?.(r)};Pt(()=>{i&&A.current.contains(document.activeElement)&&document.activeElement?.blur()},[i]),i&&f!==-1&&w(-1),i&&se!==-1&&me(-1);const je=a=>r=>{a.onChange?.(r),we(r,r.target.valueAsNumber)},ce=l.useRef(void 0);let de=H;p&&H==="horizontal"&&(de+="-reverse");const ue=({finger:a,move:r=!1})=>{const{current:v}=A,{width:C,height:j,bottom:k,left:q}=v.getBoundingClientRect();let J;de.startsWith("vertical")?J=(k-a.y)/j:J=(a.x-q)/C,de.includes("-reverse")&&(J=1-J);let O;if(O=eo(J,m,b),c)O=oo(O,c,m);else{const ve=lt(z,O);O=z[ve]}O=ke(O,m,b);let oe=0;if(T){r?oe=ce.current:oe=lt(P,O),x&&(O=ke(O,P[oe-1]||-1/0,P[oe+1]||1/0));const ve=O;O=ct({values:P,newValue:O,index:oe}),x&&r||(oe=O.indexOf(ve),ce.current=oe)}return{newValue:O,activeIndex:oe}},pe=qe(a=>{const r=ze(a,S);if(!r)return;if(Z.current+=1,a.type==="mousemove"&&a.buttons===0){te(a);return}const{newValue:v,activeIndex:C}=ue({finger:r,move:!0});De({sliderRef:A,activeIndex:C,setActive:w}),n(v),!X&&Z.current>Zt&&re(!0),g&&!Fe(v,y)&&g(a,v,C)}),te=qe(a=>{const r=ze(a,S);if(re(!1),!r)return;const{newValue:v}=ue({finger:r,move:!0});w(-1),a.type==="touchend"&&L(-1),G&&G(a,u.current??v),S.current=void 0,fe()}),U=qe(a=>{if(i)return;dt()||a.preventDefault();const r=a.changedTouches[0];r!=null&&(S.current=r.identifier);const v=ze(a,S);if(v!==!1){const{newValue:j,activeIndex:k}=ue({finger:v});De({sliderRef:A,activeIndex:k,setActive:w}),n(j),g&&!Fe(j,y)&&g(a,j,k)}Z.current=0;const C=$e(A.current);C.addEventListener("touchmove",pe,{passive:!0}),C.addEventListener("touchend",te,{passive:!0})}),fe=l.useCallback(()=>{const a=$e(A.current);a.removeEventListener("mousemove",pe),a.removeEventListener("mouseup",te),a.removeEventListener("touchmove",pe),a.removeEventListener("touchend",te)},[te,pe]);l.useEffect(()=>{const{current:a}=A;return a.addEventListener("touchstart",U,{passive:dt()}),()=>{a.removeEventListener("touchstart",U),fe()}},[fe,U]),l.useEffect(()=>{i&&fe()},[i,fe]);const _e=a=>r=>{if(a.onMouseDown?.(r),i||r.defaultPrevented||r.button!==0)return;r.preventDefault();const v=ze(r,S);if(v!==!1){const{newValue:j,activeIndex:k}=ue({finger:v});De({sliderRef:A,activeIndex:k,setActive:w}),n(j),g&&!Fe(j,y)&&g(r,j,k)}Z.current=0;const C=$e(A.current);C.addEventListener("mousemove",pe,{passive:!0}),C.addEventListener("mouseup",te)},Ce=Ve(T?P[0]:m,m,b),Y=Ve(P[P.length-1],m,b)-Ce,be=(a={})=>{const r=Xe(a),v={onMouseDown:_e(r||{})},C={...r,...v};return{...a,ref:le,...C}},Te=a=>r=>{a.onMouseOver?.(r);const v=Number(r.currentTarget.getAttribute("data-index"));L(v)},Re=a=>r=>{a.onMouseLeave?.(r),L(-1)},Ie=(a={})=>{const r=Xe(a),v={onMouseOver:Te(r||{}),onMouseLeave:Re(r||{})};return{...a,...r,...v}},Le=a=>({pointerEvents:f!==-1&&f!==a?"none":void 0});let he;return H==="vertical"&&(he=p?"vertical-rl":"vertical-lr"),{active:f,axis:de,axisProps:ro,dragging:X,focusedThumbIndex:se,getHiddenInputProps:(a={})=>{const r=Xe(a),v={onChange:je(r||{}),onFocus:Oe(r||{}),onBlur:Ge(r||{}),onKeyDown:We(r||{})},C={...r,...v};return{tabIndex:h,"aria-labelledby":o,"aria-orientation":H,"aria-valuemax":d(b),"aria-valuemin":d(m),name:R,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:i,...a,...C,style:{...Jt,direction:p?"rtl":"ltr",width:"100%",height:"100%",writingMode:he}}},getRootProps:be,getThumbProps:Ie,marks:ee,open:K,range:T,rootRef:le,trackLeap:Y,trackOffset:Ce,values:P,getThumbStyle:Le}}const ao=e=>!e||!Ne(e);function io(e){return jt("MuiSlider",e)}const Q=wt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),lo=e=>{const{open:o}=e;return{offset:Pe(o&&Q.valueLabelOpen),circle:Q.valueLabelCircle,label:Q.valueLabelLabel}};function co(e){const{children:o,className:s,value:i}=e,x=lo(e);return o?l.cloneElement(o,{className:o.props.className},t.jsxs(l.Fragment,{children:[o.props.children,t.jsx("span",{className:Pe(x.offset,s),"aria-hidden":!0,children:t.jsx("span",{className:x.circle,children:t.jsx("span",{className:x.label,children:i})})})]})):null}function ut(e){return e}const uo=ge("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o[`color${ie(s.color)}`],s.size!=="medium"&&o[`size${ie(s.size)}`],s.marked&&o.marked,s.orientation==="vertical"&&o.vertical,s.track==="inverted"&&o.trackInverted,s.track===!1&&o.trackFalse]}})(xe(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Q.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Q.dragging}`]:{[`& .${Q.thumb}, & .${Q.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Qe()).map(([o])=>({props:{color:o},style:{color:(e.vars||e).palette[o].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),po=ge("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),fo=ge("span",{name:"MuiSlider",slot:"Track"})(xe(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Qe()).map(([o])=>({props:{color:o,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${o}Track`],borderColor:e.vars.palette.Slider[`${o}Track`]}:{backgroundColor:e.lighten(e.palette[o].main,.62),borderColor:e.lighten(e.palette[o].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[o].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[o].main,.5)})}}}))]}))),go=ge("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.thumb,o[`thumbColor${ie(s.color)}`],s.size!=="medium"&&o[`thumbSize${ie(s.size)}`]]}})(xe(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Q.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Qe()).map(([o])=>({props:{color:o},style:{[`&:hover, &.${Q.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[o].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Q.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[o].main,.16)}`}}}))]}))),mo=ge(co,{name:"MuiSlider",slot:"ValueLabel"})(xe(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Q.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Q.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),ho=ge("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>ft(e)&&e!=="markActive",overridesResolver:(e,o)=>{const{markActive:s}=e;return[o.mark,s&&o.markActive]}})(xe(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),yo=ge("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>ft(e)&&e!=="markLabelActive"})(xe(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),xo=e=>{const{disabled:o,dragging:s,marked:i,orientation:x,track:p,classes:F,color:b,size:m}=e,R={root:["root",o&&"disabled",s&&"dragging",i&&"marked",x==="vertical"&&"vertical",p==="inverted"&&"trackInverted",p===!1&&"trackFalse",b&&`color${ie(b)}`,m&&`size${ie(m)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",o&&"disabled",m&&`thumbSize${ie(m)}`,b&&`thumbColor${ie(b)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Rt(R,io,F)},bo=({children:e})=>e,pt=l.forwardRef(function(o,s){const i=Ct({props:o,name:"MuiSlider"}),x=Tt(),{"aria-label":p,"aria-valuetext":F,"aria-labelledby":b,component:m="span",components:R={},componentsProps:N={},color:G="primary",classes:H,className:V,disableSwap:d=!1,disabled:c=!1,getAriaLabel:I,getAriaValueText:h,marks:M=!1,max:S=100,min:f=0,name:w,onChange:K,onChangeCommitted:L,orientation:X="horizontal",shiftStep:re=10,size:Z="medium",step:u=1,scale:y=ut,slotProps:n,slots:g,tabIndex:T,track:P="normal",value:ee,valueLabelDisplay:z="off",valueLabelFormat:se=ut,...me}=i,A={...i,isRtl:x,max:S,min:f,classes:H,disabled:c,disableSwap:d,orientation:X,marks:M,color:G,size:Z,step:u,shiftStep:re,scale:y,track:P,valueLabelDisplay:z,valueLabelFormat:se},{axisProps:le,getRootProps:Oe,getHiddenInputProps:Ge,getThumbProps:we,open:We,active:je,axis:ce,focusedThumbIndex:de,range:ue,dragging:pe,marks:te,values:U,trackOffset:fe,trackLeap:_e,getThumbStyle:Ce}=so({...A,rootRef:s});A.marked=te.length>0&&te.some($=>$.label),A.dragging=pe,A.focusedThumbIndex=de;const Y=xo(A),be=g?.root??R.Root??uo,Te=g?.rail??R.Rail??po,Re=g?.track??R.Track??fo,Ie=g?.thumb??R.Thumb??go,Le=g?.valueLabel??R.ValueLabel??mo,he=g?.mark??R.Mark??ho,Ae=g?.markLabel??R.MarkLabel??yo,a=g?.input??R.Input??"input",r=n?.root??N.root,v=n?.rail??N.rail,C=n?.track??N.track,j=n?.thumb??N.thumb,k=n?.valueLabel??N.valueLabel,q=n?.mark??N.mark,J=n?.markLabel??N.markLabel,O=n?.input??N.input,oe=ae({elementType:be,getSlotProps:Oe,externalSlotProps:r,externalForwardedProps:me,additionalProps:{...ao(be)&&{as:m}},ownerState:{...A,...r?.ownerState},className:[Y.root,V]}),ve=ae({elementType:Te,externalSlotProps:v,ownerState:A,className:Y.rail}),xt=ae({elementType:Re,externalSlotProps:C,additionalProps:{style:{...le[ce].offset(fe),...le[ce].leap(_e)}},ownerState:{...A,...C?.ownerState},className:Y.track}),Be=ae({elementType:Ie,getSlotProps:we,externalSlotProps:j,ownerState:{...A,...j?.ownerState},className:Y.thumb}),bt=ae({elementType:Le,externalSlotProps:k,ownerState:{...A,...k?.ownerState},className:Y.valueLabel}),Ue=ae({elementType:he,externalSlotProps:q,ownerState:A,className:Y.mark}),Ye=ae({elementType:Ae,externalSlotProps:J,ownerState:A,className:Y.markLabel}),vt=ae({elementType:a,getSlotProps:Ge,externalSlotProps:O,ownerState:A});return t.jsxs(be,{...oe,children:[t.jsx(Te,{...ve}),t.jsx(Re,{...xt}),te.filter($=>$.value>=f&&$.value<=S).map(($,_)=>{const Ke=Ve($.value,f,S),Ee=le[ce].offset(Ke);let ne;return P===!1?ne=U.includes($.value):ne=P==="normal"&&(ue?$.value>=U[0]&&$.value<=U[U.length-1]:$.value<=U[0])||P==="inverted"&&(ue?$.value<=U[0]||$.value>=U[U.length-1]:$.value>=U[0]),t.jsxs(l.Fragment,{children:[t.jsx(he,{"data-index":_,...Ue,...!Ne(he)&&{markActive:ne},style:{...Ee,...Ue.style},className:Pe(Ue.className,ne&&Y.markActive)}),$.label!=null?t.jsx(Ae,{"aria-hidden":!0,"data-index":_,...Ye,...!Ne(Ae)&&{markLabelActive:ne},style:{...Ee,...Ye.style},className:Pe(Y.markLabel,Ye.className,ne&&Y.markLabelActive),children:$.label}):null]},_)}),U.map(($,_)=>{const Ke=Ve($,f,S),Ee=le[ce].offset(Ke),ne=z==="off"?bo:Le;return t.jsx(ne,{...!Ne(ne)&&{valueLabelFormat:se,valueLabelDisplay:z,value:typeof se=="function"?se(y($),_):se,index:_,open:We===_||je===_||z==="on",disabled:c},...bt,children:t.jsx(Ie,{"data-index":_,...Be,className:Pe(Y.thumb,Be.className,je===_&&Y.active,de===_&&Y.focusVisible),style:{...Ee,...Ce(_),...Be.style},children:t.jsx(a,{"data-index":_,"aria-label":I?I(_):p,"aria-valuenow":y($),"aria-labelledby":b,"aria-valuetext":h?h(y($),_):F,value:U[_],...vt})})},_)})]})});function vo({sessionId:e,recording:o,cols:s=120,rows:i=30}){const x=l.useRef(null),p=l.useRef(null),[F,b]=l.useState(!0),[m,R]=l.useState(null),[N,G]=l.useState(!0),H=l.useCallback(async M=>{try{console.log("[AsciinemaPlayer] Loading asciinema-player module...");const[S]=await Promise.all([ot(()=>import("./index-BfNbCSMK.js"),[]),ot(()=>Promise.resolve({}),__vite__mapDeps([0]))]);console.log("[AsciinemaPlayer] Module loaded successfully");const f=S.default?.create||S.create;if(!f)throw new Error("asciinema-player create function not found");M.innerHTML="";const w=new Blob([o],{type:"text/plain"}),K=URL.createObjectURL(w);console.log("[AsciinemaPlayer] Blob URL created:",K),console.log("[AsciinemaPlayer] Recording preview:",o.substring(0,100));const L=f(K,M,{cols:s,rows:i,autoPlay:!0,loop:!1,startAt:0,speed:1,idleTimeLimit:2,preload:!0,theme:"monokai",fit:"width",terminalFontSize:"14px",terminalLineHeight:1.4,terminalFontFamily:'Consolas, Menlo, "Courier New", monospace'});console.log("[AsciinemaPlayer] Player config:",{autoPlay:!0,loop:!1}),console.log("[AsciinemaPlayer] Player created with methods:",{hasPlay:typeof L.play=="function",hasPause:typeof L.pause=="function",hasSeek:typeof L.seek=="function"}),p.current=L,L.addEventListener?.("play",()=>{console.log("[AsciinemaPlayer] Playing"),G(!0)}),L.addEventListener?.("pause",()=>{console.log("[AsciinemaPlayer] Paused"),G(!1)}),L.addEventListener?.("ended",()=>{console.log("[AsciinemaPlayer] Ended - stopping playback"),G(!1),L.pause&&L.pause()}),console.log("[AsciinemaPlayer]  Player created successfully"),b(!1),R(null)}catch(S){console.error("[AsciinemaPlayer]  Failed to load player:",S),R("播放器加载失败: "+S.message),b(!1)}},[o,s,i]);l.useLayoutEffect(()=>{if(console.log("[AsciinemaPlayer] useLayoutEffect triggered (同步执行)"),console.log("[AsciinemaPlayer] Session:",e),console.log("[AsciinemaPlayer] Recording size:",o?.length||0),!o||o.trim()===""){b(!1),R("没有可用的录制数据");return}let M=0;const S=50;let f=null;const w=()=>{M++,console.log(`[AsciinemaPlayer] Checking DOM (attempt ${M}/${S})...`),console.log("[AsciinemaPlayer] playerDivRef.current:",x.current?"EXISTS ":"null "),x.current?(console.log("[AsciinemaPlayer]  DOM is ready! Starting player..."),f&&clearInterval(f),H(x.current)):M>=S&&(console.error("[AsciinemaPlayer]  Timeout waiting for DOM"),f&&clearInterval(f),b(!1),R("播放器容器未就绪（超时）"))};return w(),f=setInterval(w,100),()=>{f&&clearInterval(f)}},[e,o,s,i,H]);const V=()=>{p.current&&p.current.play()},d=()=>{p.current&&p.current.pause()},c=()=>{p.current&&(p.current.seek(0),p.current.play())},I=()=>{if(p.current&&p.current.getCurrentTime){const M=p.current.getCurrentTime();p.current.seek(M+5)}},h=()=>{if(p.current&&p.current.getCurrentTime){const M=p.current.getCurrentTime();p.current.seek(Math.max(0,M-5))}};return t.jsxs(E,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#000",borderRadius:1,overflow:"hidden",position:"relative","& > div:first-of-type":{"&::-webkit-scrollbar":{width:"14px"},"&::-webkit-scrollbar-track":{background:"rgba(255, 255, 255, 0.05)"},"&::-webkit-scrollbar-thumb":{background:"rgba(102, 126, 234, 0.7)",borderRadius:"7px",border:"3px solid rgba(0, 0, 0, 1)"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(102, 126, 234, 0.9)"}},"& .asciinema-player-wrapper":{width:"100%",height:"auto",maxHeight:"600px",overflowY:"scroll","&::-webkit-scrollbar":{width:"12px"},"&::-webkit-scrollbar-track":{background:"rgba(255, 255, 255, 0.05)",borderRadius:"0 0 8px 0"},"&::-webkit-scrollbar-thumb":{background:"rgba(102, 126, 234, 0.6)",borderRadius:"6px",border:"2px solid transparent",backgroundClip:"padding-box"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(102, 126, 234, 0.8)"}},"& .asciinema-player":{width:"100%",height:"auto"},"& .asciinema-terminal":{minHeight:"450px",paddingBottom:"20px"},"& .asciinema-terminal pre":{paddingBottom:"20px !important",marginBottom:"0 !important"},"& .control-bar":{display:"flex !important",visibility:"visible !important",background:"rgba(0, 0, 0, 0.9) !important",padding:"10px !important",borderTop:"1px solid rgba(255, 255, 255, 0.1) !important"},"& .playback-button":{display:"inline-block !important"}},children:[t.jsx("div",{ref:x,style:{width:"100%",flex:"1",overflowY:"scroll",visibility:F||m?"hidden":"visible"}}),!F&&!m&&t.jsx(E,{sx:{width:"100%",padding:"16px 0",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#000",borderTop:"1px solid rgba(255,255,255,0.1)",flexShrink:0},children:t.jsxs(E,{sx:{background:"linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.9))",backdropFilter:"blur(10px)",padding:"10px 20px",borderRadius:"30px",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",gap:1},children:[t.jsx(B,{onClick:h,sx:{color:"white"},title:"后退 5 秒",children:t.jsx(gt,{})}),N?t.jsx(B,{onClick:d,sx:{color:"white",backgroundColor:"rgba(255,255,255,0.1)","&:hover":{backgroundColor:"rgba(255,255,255,0.2)"}},title:"暂停",children:t.jsx(Ze,{sx:{fontSize:32}})}):t.jsx(B,{onClick:V,sx:{color:"white",backgroundColor:"rgba(102,126,234,0.8)","&:hover":{backgroundColor:"rgba(102,126,234,1)"}},title:"播放",children:t.jsx(et,{sx:{fontSize:32}})}),t.jsx(B,{onClick:I,sx:{color:"white"},title:"前进 5 秒",children:t.jsx(mt,{})}),t.jsx(E,{sx:{width:24}}),t.jsx(B,{onClick:c,sx:{color:"white"},title:"重新开始",children:t.jsx(ht,{})})]})}),F&&t.jsx(E,{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(30, 30, 30, 0.9)",children:t.jsx(Se,{sx:{color:"#667eea"}})}),m&&!F&&t.jsx(E,{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",p:2,children:t.jsxs(It,{severity:"warning",children:[t.jsx(D,{variant:"body1",gutterBottom:!0,children:m}),m==="没有可用的录制数据"&&t.jsx(D,{variant:"body2",color:"text.secondary",children:"该会话可能在录制完成前被中断，或录制功能未正常工作。"})]})})]})}function ko({sessionId:e,playbackUrl:o}){const s=l.useRef(null),i=l.useRef(null),[x,p]=l.useState(0),[F,b]=l.useState(0),[m,R]=l.useState(!1);l.useEffect(()=>{const d=setInterval(()=>{const c=i.current;c&&typeof c.getPosition=="function"&&b(c.getPosition()),c&&typeof c.getDuration=="function"&&p(c.getDuration())},300);return()=>clearInterval(d)},[]),l.useEffect(()=>{if(!o||!s.current){console.warn("[GuacRecordingPlayer] Missing playbackUrl or containerRef");return}console.log("[GuacRecordingPlayer] Initializing player with playbackUrl:",o),console.log("[GuacRecordingPlayer] SessionId:",e),s.current.innerHTML="";try{console.log("[GuacRecordingPlayer] Creating StaticHTTPTunnel...");const d=new at.StaticHTTPTunnel(o);console.log("[GuacRecordingPlayer] StaticHTTPTunnel created:",d),d&&typeof d.onerror=="function"&&(d.onerror=f=>{console.error("[GuacRecordingPlayer] Tunnel error:",f)}),console.log("[GuacRecordingPlayer] Creating SessionRecording...");const c=new at.SessionRecording(d);i.current=c,console.log("[GuacRecordingPlayer] SessionRecording created:",c),c&&typeof c.onerror=="function"&&(c.onerror=f=>{console.error("[GuacRecordingPlayer] Recording error:",f)}),typeof c.onstatechange=="function"&&(c.onstatechange=f=>{console.log("[GuacRecordingPlayer] Recording state changed:",f),R(f===1)}),typeof c.onprogress=="function"&&(c.onprogress=f=>{console.log("[GuacRecordingPlayer] Recording progress:",f)});const I=c.getDisplay(),h=I.getElement();h.style.width="100%",h.style.height="100%",h.style.backgroundColor="#000",h.style.display="block",h.style.visibility="visible",h.style.opacity="1",h.style.position="relative",h.querySelectorAll("canvas").forEach(f=>{const w=f;w.style.display="block",w.style.visibility="visible",w.style.opacity="1",w.style.width="100%",w.style.height="100%",w.style.objectFit="contain"}),s.current.appendChild(h),console.log("[GuacRecordingPlayer] Display element appended");const S=()=>{if(typeof c.getDuration=="function"){const f=c.getDuration();if(f&&f>0)return console.log("[GuacRecordingPlayer] Recording duration:",f),p(f),typeof c.seek=="function"&&(console.log("[GuacRecordingPlayer] Seeking to start (0ms) to initialize display..."),c.seek(0),setTimeout(()=>{const w=I.getElement();w&&(w.style.display="block",w.style.visibility="visible",w.style.opacity="1",w.querySelectorAll("canvas").forEach(L=>{const X=L;X.style.display="block",X.style.visibility="visible",X.style.opacity="1"}),console.log("[GuacRecordingPlayer] Display initialized, ready to play"))},100)),!0}return!1};d.onstatechange=f=>{console.log("[GuacRecordingPlayer] Tunnel state changed:",f),f===1&&(console.log("[GuacRecordingPlayer] Tunnel opened, initializing recording..."),setTimeout(()=>{if(S())console.log("[GuacRecordingPlayer] Recording initialized successfully");else{let w=0;const K=setInterval(()=>{w++,(S()||w>20)&&(clearInterval(K),w>20&&console.warn("[GuacRecordingPlayer] Failed to initialize recording after retries"))},200)}},500))},console.log("[GuacRecordingPlayer] Calling rec.connect()..."),c.connect(),console.log("[GuacRecordingPlayer] rec.connect() called")}catch(d){console.error("[GuacRecordingPlayer] Error initializing player:",d)}return()=>{const d=i.current;if(d&&typeof d.disconnect=="function")try{d.disconnect()}catch(c){console.error("[GuacRecordingPlayer] Error disconnecting:",c)}i.current=null}},[o,e]);const N=()=>{const d=i.current;if(d)if(m)typeof d.pause=="function"&&d.pause(),R(!1);else{const c=d.getDisplay?.();if(c){const I=c.getElement?.();I&&(I.style.display="block",I.style.visibility="visible",I.style.opacity="1",I.querySelectorAll("canvas").forEach(M=>{const S=M;S.style.display="block",S.style.visibility="visible",S.style.opacity="1"}))}typeof d.seek=="function"&&(d.getPosition?.()===0||!d.getPosition)&&d.seek(0),typeof d.play=="function"&&d.play(),R(!0)}},G=()=>{const d=i.current;!d||typeof d.seek!="function"||(d.seek(0),!m&&typeof d.play=="function"&&d.play(),R(!0),b(0))},H=d=>{const c=i.current;if(!c||typeof c.seek!="function")return;const I=Math.max(0,Math.min(x||0,(c.getPosition?.()||0)+d));c.seek(I),b(I)},V=x>0?Math.min(100,F/x*100):0;return t.jsxs(E,{sx:{display:"flex",flexDirection:"column",height:"100%",background:"#000"},children:[t.jsx(E,{ref:s,sx:{flex:1,minHeight:400,backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}}),t.jsxs(E,{sx:{px:2,py:1.5,display:"flex",alignItems:"center",gap:1.5,backgroundColor:"#111",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[t.jsx(B,{onClick:G,sx:{color:"#fff"},size:"small",children:t.jsx(ht,{fontSize:"small"})}),t.jsx(B,{onClick:()=>H(-5e3),sx:{color:"#fff"},size:"small",children:t.jsx(gt,{fontSize:"small"})}),t.jsx(B,{onClick:N,sx:{color:"#fff"},size:"small",children:m?t.jsx(Ze,{fontSize:"small"}):t.jsx(et,{fontSize:"small"})}),t.jsx(B,{onClick:()=>H(5e3),sx:{color:"#fff"},size:"small",children:t.jsx(mt,{fontSize:"small"})}),t.jsx(E,{sx:{flex:1,mx:1},children:t.jsx(Bt,{variant:"determinate",value:V,sx:{height:6,borderRadius:3,backgroundColor:"rgba(255,255,255,0.12)","& .MuiLinearProgress-bar":{backgroundColor:"#6c5ce7"}}})}),t.jsxs(D,{variant:"caption",color:"#fff",children:[Math.round(F/1e3),"s / ",Math.round(x/1e3),"s"]})]})]})}function So({sessionId:e,playbackUrl:o}){const s=l.useRef(null),i=l.useRef(null),[x,p]=l.useState(!1),[F,b]=l.useState(0),[m,R]=l.useState(0),[N,G]=l.useState(1),[H,V]=l.useState(!1),[d,c]=l.useState(!1),[I,h]=l.useState(!0),[M,S]=l.useState(null);l.useEffect(()=>{const u=s.current;if(!u)return;const y=()=>{R(u.duration),h(!1),console.log("[MP4Player] Video metadata loaded, duration:",u.duration)},n=()=>{b(u.currentTime)},g=()=>{p(!0)},T=()=>{p(!1)},P=()=>{p(!1),b(0)},ee=()=>{S("视频加载失败"),h(!1),console.error("[MP4Player] Video error:",u.error)},z=()=>{c(!!document.fullscreenElement)};return u.addEventListener("loadedmetadata",y),u.addEventListener("timeupdate",n),u.addEventListener("play",g),u.addEventListener("pause",T),u.addEventListener("ended",P),u.addEventListener("error",ee),document.addEventListener("fullscreenchange",z),()=>{u.removeEventListener("loadedmetadata",y),u.removeEventListener("timeupdate",n),u.removeEventListener("play",g),u.removeEventListener("pause",T),u.removeEventListener("ended",P),u.removeEventListener("error",ee),document.removeEventListener("fullscreenchange",z)}},[]);const f=()=>{const u=s.current;u&&(x?u.pause():u.play())},w=(u,y)=>{const n=s.current;if(!n)return;const g=Array.isArray(y)?y[0]:y;n.currentTime=g,b(g)},K=(u,y)=>{const n=s.current;if(!n)return;const g=Array.isArray(y)?y[0]:y;n.volume=g,G(g),V(g===0)},L=()=>{const u=s.current;u&&(u.muted=!H,V(!H))},X=()=>{const u=i.current;u&&(d?document.exitFullscreen().catch(y=>{console.error("[MP4Player] Failed to exit fullscreen:",y)}):u.requestFullscreen().catch(y=>{console.error("[MP4Player] Failed to enter fullscreen:",y)}))},re=u=>{const y=Math.floor(u/3600),n=Math.floor(u%3600/60),g=Math.floor(u%60);return y>0?`${y}:${n.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`:`${n}:${g.toString().padStart(2,"0")}`},Z=()=>{if(!o)return"";const u=typeof window<"u"?localStorage.getItem("token"):"";if(!u)return console.warn("[MP4Player] No token found in localStorage"),o;if(o.includes("token="))return o;const y=o.includes("?")?"&":"?",n=`${o}${y}token=${encodeURIComponent(u)}`;return console.log("[MP4Player] Video URL with token:",n.substring(0,100)+"..."),n};return t.jsxs(E,{ref:i,sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#000",position:"relative"},children:[M&&t.jsx(E,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",zIndex:10},children:t.jsx(D,{variant:"h6",children:M})}),I&&t.jsx(E,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",zIndex:10},children:t.jsx(D,{children:"加载中..."})}),t.jsx("video",{ref:s,src:Z(),style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000"},controls:!1,preload:"metadata",playsInline:!0,crossOrigin:"anonymous",onError:u=>{const y=u.currentTarget;console.error("[MP4Player] Video error:",{error:y.error,code:y.error?.code,message:y.error?.message,networkState:y.networkState,readyState:y.readyState}),S(`视频加载失败: ${y.error?.message||"未知错误"}`),h(!1)}}),t.jsxs(E,{sx:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.7)",padding:1,display:"flex",alignItems:"center",gap:1},children:[t.jsx(B,{onClick:f,sx:{color:"#fff"},children:x?t.jsx(Ze,{}):t.jsx(et,{})}),t.jsxs(D,{variant:"body2",sx:{color:"#fff",minWidth:80},children:[re(F)," / ",re(m)]}),t.jsx(pt,{value:F,min:0,max:m||100,onChange:w,sx:{flex:1,color:"#fff","& .MuiSlider-thumb":{width:12,height:12}}}),t.jsx(B,{onClick:L,sx:{color:"#fff"},children:H?t.jsx(Lt,{}):t.jsx(At,{})}),t.jsx(pt,{value:H?0:N,min:0,max:1,step:.01,onChange:K,sx:{width:100,color:"#fff","& .MuiSlider-thumb":{width:12,height:12}}}),t.jsx(B,{onClick:X,sx:{color:"#fff"},children:d?t.jsx(Et,{}):t.jsx(Mt,{})})]})]})}function Lo(){const{t:e}=zt(),[o,s]=l.useState(!0),[i,x]=l.useState([]),[p,F]=l.useState(""),[b,m]=l.useState(0),[R,N]=l.useState(10),[G,H]=l.useState(0),[V,d]=l.useState(null),[c,I]=l.useState(!1),[h,M]=l.useState(null),[S,f]=l.useState(!1),[w,K]=l.useState(!1),L=l.useCallback(async()=>{s(!0);try{const n=await Je.getSessionRecordings({page:b+1,pageSize:R,search:p}),g=n.sessions.map(T=>({id:T.id,sessionId:T.sessionId,hostName:T.hostName||T.hostIp||"Unknown",hostIp:T.hostIp||"",username:T.username||"",startTime:new Date(T.startTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),endTime:T.endTime?new Date(T.endTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"",duration:(T.status==="active"?"active":"closed")==="closed"&&(!T.duration||T.duration==="进行中"||T.duration==="???")?"-":T.duration||"-",commandCount:T.commandCount||0,status:T.status==="active"?"active":"closed",connectionType:T.connectionType||"ssh_client",recording:T.recording||""}));x(g),H(n.total),s(!1)}catch(n){console.error("Failed to load sessions:",n),x([]),H(0),s(!1)}},[b,R,p]),X=async n=>{if(confirm(`${e("sessions.terminateConfirm")} ${n.sessionId.substring(0,8)}...?`))try{await Je.terminateSession(n.sessionId),alert(e("sessions.terminateConfirm")),L()}catch(g){console.error("Failed to terminate session:",g),alert(e("sessions.terminate")+" failed: "+g.message)}};l.useEffect(()=>{L()},[L]);const re=async n=>{if(n.status==="active"){alert(e("sessions.sessionActiveAlert"));return}d(n),I(!0),K(!1),f(!0),M(null);try{const g=await Je.getSessionRecording(n.sessionId);M({...g,connectionType:g.connectionType||n.connectionType}),f(!1)}catch(g){console.error("Failed to load recording:",g),f(!1),alert(e("sessions.loadRecordingFailedAlert"))}},Z=()=>{I(!1),K(!1),d(null),M(null)},u=()=>{console.log("[Sessions] Dialog animation completed"),console.log("[Sessions] loadingRecording:",S),console.log("[Sessions] recordingDetail:",h?"exists":"null"),console.log("[Sessions] playingSession:",V?"exists":"null"),K(!0)},y=i.filter(n=>n.hostName.toLowerCase().includes(p.toLowerCase())||n.username.toLowerCase().includes(p.toLowerCase())||n.sessionId.toLowerCase().includes(p.toLowerCase()));return o?t.jsx(E,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(Se,{})}):t.jsxs(E,{children:[t.jsxs(E,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[t.jsx(D,{variant:"h4",component:"h1",children:e("sessions.replayTitle")}),t.jsx(B,{onClick:L,color:"primary",children:t.jsx(Dt,{})})]}),t.jsx(rt,{elevation:0,sx:{mb:3,border:"1px solid #e2e8f0"},children:t.jsx(nt,{children:t.jsx(Ft,{placeholder:e("common.search")+"...",value:p,onChange:n=>F(n.target.value),size:"small",fullWidth:!0,InputProps:{startAdornment:t.jsx(Ht,{position:"start",children:t.jsx($t,{})})}})})}),t.jsx(rt,{elevation:0,sx:{border:"1px solid #e2e8f0"},children:t.jsxs(nt,{sx:{p:0},children:[t.jsxs(E,{sx:{px:3,py:2.5,borderBottom:"1px solid #e2e8f0"},children:[t.jsx(D,{variant:"h6",fontWeight:"600",color:"text.primary",children:e("sessions.title")}),t.jsx(D,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:e("common.totalRecords",{count:G})})]}),t.jsx(Ut,{children:t.jsxs(Yt,{children:[t.jsx(Kt,{children:t.jsxs(it,{children:[t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.sessionId")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.host")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.user")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.startTime")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.endTime")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.duration")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.commandCount")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("common.status")}),t.jsx(W,{align:"center",sx:{fontWeight:700,color:"#667eea"},children:e("common.actions")})]})}),t.jsx(qt,{children:y.map(n=>t.jsxs(it,{hover:!0,sx:{transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(102, 126, 234, 0.05)"}},children:[t.jsx(W,{children:t.jsx(Nt,{title:n.sessionId,placement:"top",children:t.jsxs(D,{variant:"caption",fontFamily:"monospace",sx:{fontSize:"0.75rem"},children:[n.sessionId.substring(0,20),"..."]})})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",fontWeight:500,children:n.hostIp})}),t.jsx(W,{children:t.jsx(Me,{label:n.username,size:"small",sx:{backgroundColor:"rgba(102, 126, 234, 0.1)",color:"#667eea"}})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",color:"text.secondary",children:n.startTime})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",color:"text.secondary",children:n.endTime||"-"})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",fontWeight:500,children:n.duration})}),t.jsx(W,{children:t.jsx(Me,{label:n.commandCount,size:"small",sx:{backgroundColor:"#faf5ff",color:"#805ad5",fontWeight:600}})}),t.jsx(W,{children:n.status==="active"?t.jsx(Me,{label:e("common.inProgress"),size:"small",sx:{backgroundColor:"#ebf8ff",color:"#3182ce"}}):t.jsx(Me,{label:e("common.completed"),size:"small",sx:{backgroundColor:"#f0f0f0",color:"#718096"}})}),t.jsx(W,{align:"center",children:t.jsx(E,{display:"flex",gap:1,justifyContent:"center",children:n.status==="active"?t.jsx(B,{color:"error",onClick:()=>X(n),title:e("sessions.terminate"),children:t.jsx(Vt,{})}):t.jsx(B,{color:"primary",onClick:()=>re(n),title:e("sessions.replay"),children:t.jsx(st,{})})})})]},n.id))})]})}),G>0&&t.jsx(Xt,{component:"div",count:G,page:b,onPageChange:(n,g)=>m(g),rowsPerPage:R,onRowsPerPageChange:n=>{N(parseInt(n.target.value,10)),m(0)},rowsPerPageOptions:[10,25,50,100],labelRowsPerPage:`${e("common.rowsPerPage")}:`,sx:{borderTop:"1px solid #e2e8f0",mt:0,width:"100%",".MuiTablePagination-toolbar":{paddingLeft:2,paddingRight:2,minHeight:"52px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},".MuiTablePagination-spacer":{flex:"1 1 auto"},".MuiTablePagination-selectLabel":{marginRight:1,marginBottom:0,fontWeight:500,fontSize:"0.875rem",color:"text.secondary",display:"flex",alignItems:"center",lineHeight:1.5},".MuiTablePagination-displayedRows":{marginBottom:0,fontWeight:500,fontSize:"0.875rem",color:"text.secondary",display:"flex",alignItems:"center",lineHeight:1.5},".MuiTablePagination-select":{fontSize:"0.875rem",marginRight:2,marginTop:0,marginBottom:0},".MuiTablePagination-actions":{marginLeft:1,display:"flex",alignItems:"center"}}})]})}),t.jsxs(Ot,{open:c,onClose:Z,maxWidth:"lg",fullWidth:!0,TransitionProps:{onEntered:u},PaperProps:{sx:{height:"auto",maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:[t.jsxs(Gt,{sx:{borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",py:1.5,flexShrink:0},children:[t.jsxs(E,{display:"flex",alignItems:"baseline",gap:2,children:[t.jsx(D,{variant:"h6",children:e("sessions.replayTitle")}),V&&t.jsxs(D,{variant:"caption",color:"text.secondary",children:[V.hostName," (",V.hostIp,") - ",V.username]})]}),t.jsx(B,{onClick:Z,sx:{color:"text.secondary","&:hover":{color:"error.main",backgroundColor:"rgba(211, 47, 47, 0.08)"}},title:e("common.close"),children:t.jsx(Wt,{})})]}),t.jsx(_t,{sx:{p:0,backgroundColor:"#000",display:"flex",flexDirection:"column",height:"650px",maxHeight:"70vh",overflow:"hidden"},children:(()=>{if(console.log("[Sessions] Rendering DialogContent:",{loadingRecording:S,dialogReady:w,hasRecordingDetail:!!h,hasPlayingSession:!!V}),S)return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",children:[t.jsx(Se,{sx:{color:"#667eea",mb:2}}),t.jsx(D,{color:"white",children:e("sessions.loadingRecording")})]});if(!w)return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",children:[t.jsx(Se,{sx:{color:"#667eea",mb:2}}),t.jsx(D,{color:"white",children:e("sessions.preparingPlayer")})]});const n=h?.type||(h?.connectionType==="rdp"?"mp4":null),g=h?.status||"ready",T=typeof window<"u"?localStorage.getItem("token"):"";let P=h?.src||(h?.connectionType==="rdp"?`/api/sessions/recordings/${h.sessionId}/file`:null);if(P&&T&&!P.includes("token=")){const ee=P.includes("?")?"&":"?";P=`${P}${ee}token=${encodeURIComponent(T)}`}if(h){if(h?.connectionType==="rdp"){if(g==="not_found")return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",sx:{color:"#fff"},children:[t.jsx(D,{variant:"h6",sx:{mb:2},children:e("sessions.recordingNotFound")}),t.jsx(D,{variant:"body2",color:"text.secondary",children:e("sessions.recordingNotFoundDesc")})]});if(g==="converting")return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",sx:{color:"#fff"},children:[t.jsx(Se,{sx:{color:"#667eea",mb:2}}),t.jsx(D,{variant:"h6",sx:{mb:1},children:e("sessions.recordingConverting")}),t.jsx(D,{variant:"body2",color:"text.secondary",children:e("sessions.recordingConvertingDesc")})]});if(n==="mp4"&&P)return t.jsx(So,{sessionId:h.sessionId,playbackUrl:P})}return n==="guacamole"&&P?t.jsx(ko,{sessionId:h.sessionId,playbackUrl:P}):(console.log("[Sessions] Rendering AsciinemaPlayer with:",{sessionId:h.sessionId,recordingLength:h.recording?.length||0,cols:h.terminalCols,rows:h.terminalRows}),t.jsx(vo,{sessionId:h.sessionId,recording:h.recording,cols:h.terminalCols,rows:h.terminalRows}))}return V?t.jsxs(E,{sx:{textAlign:"center",py:10},children:[t.jsx(st,{sx:{fontSize:80,color:"#667eea",mb:2}}),t.jsx(D,{variant:"h6",color:"white",gutterBottom:!0,children:e("sessions.loadRecordingFailed")}),t.jsxs(D,{variant:"body2",color:"rgba(255,255,255,0.7)",children:[e("sessions.sessionId"),": ",V.sessionId]})]}):null})()})]})]})}export{Lo as default};
