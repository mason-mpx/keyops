import{H as a}from"./index-Cih9_E47.js";const i={listClusters:async()=>{try{const s=await a.get("/api/k8s/clusters");let t=s.data?.data;return t==null&&(t=s.data),Array.isArray(t)?t:t&&typeof t=="object"&&"code"in t&&t.code!==0?(console.warn("[K8sClusterApi] API returned error:",t),[]):(console.warn("[K8sClusterApi] Unexpected response format:",s.data),[])}catch(s){return console.error("[K8sClusterApi] Error fetching clusters:",s),[]}},getCluster:async s=>{const t=await a.get(`/api/k8s/clusters/${s}`);return t.data?.data||t.data},createCluster:async s=>{const t=await a.post("/api/k8s/clusters",s);return t.data?.data||t.data},updateCluster:async(s,t)=>{const e=await a.put(`/api/k8s/clusters/${s}`,t);return e.data?.data||e.data},deleteCluster:async s=>{await a.delete(`/api/k8s/clusters/${s}`)},getClusterSummary:async s=>{const t=await a.get(`/api/k8s/clusters/${s}/summary`);return t.data?.data||t.data},getAllClustersSummary:async()=>{const s=await a.get("/api/k8s/clusters/summary");return s.data?.data||s.data||[]},getDashboardStatistics:async()=>{const s=await a.get("/api/k8s/clusters/dashboard/statistics");return s.data?.data||s.data||{}}},o={getClusterPermissions:async s=>{const t=await a.get(`/api/k8s/clusters/${s}/permissions`);return t.data?.data||t.data||[]},getPermissions:async s=>{const t=new URLSearchParams;s?.userId&&t.append("userId",s.userId),s?.roleId&&t.append("roleId",s.roleId),s?.clusterId&&t.append("clusterId",s.clusterId);const e=`/api/k8s/permissions${t.toString()?"?"+t.toString():""}`,r=await a.get(e);return r.data?.data||r.data||[]},addPermission:async s=>{await a.post("/api/k8s/permissions",s)},removePermission:async s=>{await a.delete("/api/k8s/permissions",{data:s})},checkPermission:async s=>(await a.post("/api/k8s/permissions/check",s)).data?.data===!0};export{o as a,i as k};
