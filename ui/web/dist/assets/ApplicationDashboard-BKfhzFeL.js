import{u as O,r as l,br as P,j as e,B as n,C as K,T as r,I as X,v as Y,bj as $,f as F,e as M,ab as G,w as p,x}from"./index-Cih9_E47.js";import{R as S,T as C,L as v,C as N,X as _,Y as q}from"./CartesianChart-B8NkeHhB.js";import{P as J,a as Q}from"./PieChart-JL_JAU1m.js";import{C as U}from"./tooltipContext-KnZ6bvDZ.js";import{B as V,a as Z}from"./BarChart-CM-_Impn.js";import{T as ee,a as se,b as ae,c as u,d as o,e as te}from"./TableRow-Bl_73t-R.js";import{C as g}from"./Chip-D6-9bdkU.js";import"./value-BHcoEGQb.js";const w=["#667eea","#764ba2","#f093fb","#4facfe","#00f2fe"];function de(){const{t:s}=O(),[z,d]=l.useState(!0),[y,T]=l.useState([]),[c,A]=l.useState({total:0,running:0,stopped:0,critical:0}),[h,W]=l.useState([]),[D,I]=l.useState([]),m=l.useCallback(async()=>{d(!0);try{const a=await P.getApplications(),i=Array.isArray(a)?a:[];T(i);const R=i.length,B=i.filter(t=>t.status==="Running").length,E=i.filter(t=>t.status==="Stopped").length,L=i.filter(t=>t.isCritical).length;A({total:R,running:B,stopped:E,critical:L});const f={};i.forEach(t=>{f[t.status]=(f[t.status]||0)+1});const k=Object.entries(f).map(([t,j])=>({name:s(t==="Running"?"applicationDashboard.status.running":t==="Stopped"?"applicationDashboard.status.stopped":"applicationDashboard.status.initializing"),value:j}));W(k);const b={};i.forEach(t=>{b[t.srvType]=(b[t.srvType]||0)+1});const H=Object.entries(b).map(([t,j])=>({name:t,value:j}));I(H),d(!1)}catch(a){console.error("Failed to load application data:",a),d(!1)}},[s]);return l.useEffect(()=>{m()},[m]),z?e.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(K,{})}):e.jsxs(n,{children:[e.jsxs(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(r,{variant:"h4",component:"h1",children:s("applicationDashboard.title")}),e.jsx(X,{onClick:m,color:"primary",children:e.jsx(Y,{})})]}),e.jsx(n,{sx:{display:"flex",gap:2.5,mb:3,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[{label:s("applicationDashboard.totalApplications"),value:c.total,icon:$,color:"#3182ce",bg:"#ebf8ff"},{label:s("applicationDashboard.runningApplications"),value:c.running,icon:F,color:"#38a169",bg:"#f0fff4"},{label:s("applicationDashboard.stoppedApplications"),value:c.stopped,icon:M,color:"#e53e3e",bg:"#fff5f5"},{label:s("applicationDashboard.criticalApplications"),value:c.critical,icon:G,color:"#d69e2e",bg:"#fffbf0"}].map((a,i)=>e.jsx(n,{sx:{flex:1,minWidth:{xs:"100%",sm:0}},children:e.jsx(p,{elevation:0,sx:{border:"1px solid #e2e8f0",width:"100%",height:{xs:"160px",sm:"180px"},transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.08)",transform:"translateY(-2px)"}},children:e.jsxs(x,{sx:{p:{xs:2.5,sm:3.5},height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(r,{variant:"body2",color:"text.secondary",fontWeight:500,sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:a.label}),e.jsx(n,{sx:{width:{xs:40,sm:48},height:{xs:40,sm:48},borderRadius:2.5,backgroundColor:a.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(a.icon,{sx:{fontSize:{xs:24,sm:28},color:a.color}})})]}),e.jsx(r,{variant:"h2",fontWeight:"700",color:"text.primary",sx:{fontSize:{xs:"2rem",sm:"3rem"}},children:a.value})]})})},i))}),e.jsx(n,{sx:{mb:3},children:e.jsx(p,{elevation:0,sx:{border:"1px solid #e2e8f0",width:"100%"},children:e.jsxs(x,{sx:{p:{xs:2,sm:3}},children:[e.jsx(r,{variant:"h6",fontWeight:"600",color:"text.primary",mb:2,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:s("applicationDashboard.applicationStatusDistribution")}),h.length===0?e.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:e.jsx(r,{color:"text.secondary",children:s("applicationDashboard.noData")})}):e.jsx(S,{width:"100%",height:320,children:e.jsxs(J,{children:[e.jsx(Q,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:i})=>`${a}: ${((i??0)*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:h.map((a,i)=>e.jsx(U,{fill:w[i%w.length]},`cell-${i}`))}),e.jsx(C,{}),e.jsx(v,{})]})})]})})}),e.jsx(n,{sx:{mb:3},children:e.jsx(p,{elevation:0,sx:{border:"1px solid #e2e8f0",width:"100%"},children:e.jsxs(x,{sx:{p:{xs:2,sm:3}},children:[e.jsx(r,{variant:"h6",fontWeight:"600",color:"text.primary",mb:2,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:s("applicationDashboard.applicationTypeDistribution")}),D.length===0?e.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:e.jsx(r,{color:"text.secondary",children:s("applicationDashboard.noData")})}):e.jsx(S,{width:"100%",height:320,children:e.jsxs(V,{data:D,children:[e.jsx(N,{strokeDasharray:"3 3"}),e.jsx(_,{dataKey:"name"}),e.jsx(q,{}),e.jsx(C,{}),e.jsx(v,{}),e.jsx(Z,{dataKey:"value",fill:"#667eea"})]})})]})})}),e.jsx(p,{elevation:0,sx:{border:"1px solid #e2e8f0"},children:e.jsxs(x,{sx:{p:0},children:[e.jsx(n,{sx:{px:{xs:2,sm:3},py:2.5,borderBottom:"1px solid #e2e8f0"},children:e.jsx(r,{variant:"h6",fontWeight:"600",color:"text.primary",sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:s("applicationDashboard.recentApplications")})}),e.jsx(ee,{sx:{overflowX:"auto"},children:e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(u,{children:[e.jsx(o,{sx:{fontWeight:700,color:"#667eea",fontSize:{xs:"0.75rem",sm:"0.875rem"},whiteSpace:"nowrap"},children:s("applicationDashboard.table.applicationName")}),e.jsx(o,{sx:{fontWeight:700,color:"#667eea",fontSize:{xs:"0.75rem",sm:"0.875rem"},whiteSpace:"nowrap"},children:s("applicationDashboard.table.organization")}),e.jsx(o,{sx:{fontWeight:700,color:"#667eea",fontSize:{xs:"0.75rem",sm:"0.875rem"},whiteSpace:"nowrap"},children:s("applicationDashboard.table.serviceType")}),e.jsx(o,{sx:{fontWeight:700,color:"#667eea",fontSize:{xs:"0.75rem",sm:"0.875rem"},whiteSpace:"nowrap"},children:s("applicationDashboard.table.status")}),e.jsx(o,{sx:{fontWeight:700,color:"#667eea",fontSize:{xs:"0.75rem",sm:"0.875rem"},whiteSpace:"nowrap"},children:s("applicationDashboard.table.isCritical")})]})}),e.jsx(te,{children:y.length===0?e.jsx(u,{children:e.jsx(o,{colSpan:5,align:"center",sx:{py:8},children:e.jsx(r,{variant:"body1",color:"text.secondary",children:s("applicationDashboard.noData")})})}):y.slice(0,10).map(a=>e.jsxs(u,{hover:!0,children:[e.jsx(o,{sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:e.jsx(r,{fontWeight:600,children:a.name})}),e.jsx(o,{sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:a.org||"-"}),e.jsx(o,{sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:e.jsx(g,{label:a.srvType,size:"small",variant:"outlined"})}),e.jsx(o,{sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:e.jsx(g,{label:a.status==="Running"?s("applicationDashboard.status.running"):a.status==="Stopped"?s("applicationDashboard.status.stopped"):s("applicationDashboard.status.initializing"),color:a.status==="Running"?"success":a.status==="Stopped"?"error":"default",size:"small"})}),e.jsx(o,{sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:a.isCritical?e.jsx(g,{label:s("applicationDashboard.critical"),color:"warning",size:"small"}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"-"})})]},a.id))})]})})]})})]})}export{de as default};
