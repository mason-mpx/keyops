import{u as Ie,r as c,b4 as L,j as t,B as u,w as Ae,x as De,T as h,a as y,v as ke,A as $e,P as de,d as H,I as F,g as Pe,h as Ee,i as Ne,k as Oe,l as ze,m as b,b as C,cN as Me,a3 as Ve,a4 as he,bb as ue,C as me,a7 as w,cl as We,cT as Ue,_ as Le,p as He,bf as B}from"./index-OJNN34VQ.js";import{a as p}from"./alertApi-B6fxbdaa.js";import{S as _}from"./Stack-D4jLN6n0.js";import{T as Fe,a as Be,b as Je,c as $,d as m,e as Re}from"./TableRow-Dz3vPXNr.js";import{C as J}from"./Chip-pSvhxX1X.js";import{P as Ge}from"./Pagination-BaRJWssK.js";import{A as R}from"./Autocomplete-cIcVOBXR.js";import{S as qe}from"./Switch-BGuUO65b.js";import"./LastPage-COOW1SXp.js";function st(){const{t:n}=Ie(),[G,q]=c.useState([]),[K,Q]=c.useState(!1),[pe,X]=c.useState(!1),[S,P]=c.useState(null),[E,ge]=c.useState(1),[N]=c.useState(10),[Y,fe]=c.useState(0),[Z,xe]=c.useState("visual"),[ee,je]=c.useState(!1),[O,te]=c.useState([]),[ye,ne]=c.useState(!1),[o,g]=c.useState({template_name:"",template_desc:"",channels:{},members:[],alert_groups:[],enable:!0}),[z,x]=c.useState({}),[ae,se]=c.useState({}),[re,T]=c.useState([]),[M,V]=c.useState(new Map),[I,A]=c.useState(!1),[le,be]=c.useState(""),[D,ie]=c.useState([]),[W,oe]=c.useState(!1),Ce=async()=>{try{oe(!0);const e=await p.getAlertGroups({page:1,page_size:1e3});(e.data.code===0||e.data.code===200)&&ie(e.data.data||[])}catch(e){console.error("加载告警组列表失败:",e),ie([])}finally{oe(!1)}},k=c.useCallback(async()=>{A(!0);try{const a=(await L.getUsersWithPagination({page:1,pageSize:20})).users||[];T(a),V(s=>{const r=new Map(s);return a.forEach(i=>{r.set(i.id,i)}),r})}catch(e){console.error("加载用户列表失败:",e),T([])}finally{A(!1)}},[]),_e=c.useCallback(async e=>{if(!e||e.trim().length===0){await k();return}A(!0);try{const s=(await L.getUsersWithPagination({page:1,pageSize:20,keyword:e.trim()})).users||[];T(s),V(r=>{const i=new Map(r);return s.forEach(l=>{i.set(l.id,l)}),i})}catch(a){console.error("搜索用户失败:",a),T([])}finally{A(!1)}},[k]),Se=async()=>{try{ne(!0);const e=await p.getChannels({page:1,page_size:1e3});(e.data.code===0||e.data.code===200)&&te(e.data.data||[])}catch(e){console.error("获取告警渠道失败:",e),te([])}finally{ne(!1)}},v=c.useCallback(async()=>{try{Q(!0);const e=await p.getTemplates({page:E,page_size:N});(e.data.code===0||e.data.code===200)&&(q(e.data.data||[]),fe(e.data.total||0))}catch(e){console.error("获取告警模板失败:",e),q([])}finally{Q(!1)}},[E,N]);c.useEffect(()=>{v(),Ce(),Se()},[v]);const ce=async e=>{if(await k(),e){P(e),g({template_name:e.template_name,template_desc:e.template_desc||"",channels:e.channels||{},members:Array.isArray(e.members)?e.members.map(a=>String(a)):[],alert_groups:Array.isArray(e.alert_groups)?e.alert_groups:[],enable:e.enable});try{const a=await p.getChannelTemplates(e.id);if(a.data.code===0||a.data.code===200){const s={};a.data.data.forEach(r=>{r.channel_id&&(s[r.channel_id]=r.content||"")}),x(s)}else x({})}catch(a){console.error("加载渠道模板内容失败:",a),x({})}if(Array.isArray(e.members)&&e.members.length>0)try{const s=(await L.getUsersWithPagination({page:1,pageSize:1e3})).users||[];V(r=>{const i=new Map(r);return s.forEach(l=>{i.set(l.id,l);const d=parseInt(l.id,10);isNaN(d)||i.set(String(d),l)}),i}),T(s)}catch(a){console.error("加载成员信息失败:",a)}}else P(null),g({template_name:"",template_desc:"",channels:{},members:[],alert_groups:[],enable:!0}),x({});se({}),X(!0)},U=()=>{X(!1),P(null)},Te=e=>{if(!e||typeof e!="object")return null;const a=new Map(O.map(r=>[r.id,r])),s=[];for(const[r,i]of Object.entries(e))if(Array.isArray(i))for(const l of i)a.has(l)||s.push(`${r}: ${l}`);return s.length>0?n("Invalid channel IDs")||`无效的渠道ID: ${s.join(", ")}`:null},ve=async()=>{if(!o.template_name){B(n("Please fill in template name")||"请填写模板名称");return}const e=Te(o.channels);if(e){B(e);return}try{let a;if(S)await p.updateTemplate(S.id,o),a=S.id,w(n("Update successful")||"更新成功");else{const l=await p.createTemplate(o);if(!l.data.data||!l.data.data.id)throw new Error("创建模板失败：未返回模板ID");a=l.data.data.id,w(n("Create successful")||"创建成功")}const s=new Set;o.channels&&typeof o.channels=="object"&&Object.values(o.channels).forEach(l=>{Array.isArray(l)&&l.forEach(d=>s.add(d))});const r=Array.from(s),i=r.map(async l=>{const d=z[l]||"",j=d.trim().length>0;try{await p.updateChannelTemplate(a,l,d,j)}catch(f){console.error(`保存渠道 ${l} 的模板内容失败:`,f)}});if(await Promise.all(i),S)try{const l=await p.getChannelTemplates(a);if(l.data.code===0||l.data.code===200){const d=new Set(r),j=l.data.data.filter(f=>f.channel_id&&!d.has(f.channel_id)).map(f=>f.channel_id?p.deleteChannelTemplate(a,f.channel_id):Promise.resolve());await Promise.all(j)}}catch(l){console.error("清理渠道模板内容失败:",l)}U(),v()}catch(a){console.error("保存失败:",a),B(a?.response?.data?.message||n("Save failed")||"保存失败")}},we=async e=>{if(confirm(n("Are you sure you want to delete this template?")||"确定要删除这个告警模板吗？"))try{await p.deleteTemplate(e),w(n("Delete successful")||"删除成功"),v()}catch(a){console.error("删除失败:",a)}};return t.jsxs(u,{sx:{p:3},children:[t.jsx(Ae,{children:t.jsxs(De,{children:[t.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(h,{variant:"h5",gutterBottom:!0,children:n("menu.monitorAlertTemplate")||"告警模板管理"}),t.jsxs(_,{direction:"row",spacing:2,children:[t.jsx(y,{variant:"outlined",startIcon:t.jsx(ke,{}),onClick:v,disabled:K,children:n("common.refresh")}),t.jsx(y,{variant:"contained",startIcon:t.jsx($e,{}),onClick:()=>ce(),children:n("Create Template")})]})]}),t.jsx(Fe,{component:de,children:t.jsxs(Be,{children:[t.jsx(Je,{children:t.jsxs($,{children:[t.jsx(m,{children:n("Template Name")}),t.jsx(m,{children:n("Description")}),t.jsx(m,{children:n("Channels")}),t.jsx(m,{children:n("common.status")}),t.jsx(m,{children:n("Created At")}),t.jsx(m,{align:"right",children:n("common.actions")})]})}),t.jsx(Re,{children:K?t.jsx($,{children:t.jsx(m,{colSpan:6,align:"center",children:n("common.loading")})}):G.length===0?t.jsx($,{children:t.jsx(m,{colSpan:6,align:"center",children:n("common.noData")})}):G.map(e=>t.jsxs($,{children:[t.jsx(m,{children:e.template_name}),t.jsx(m,{children:e.template_desc||"-"}),t.jsx(m,{children:t.jsx(h,{variant:"body2",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis"},children:JSON.stringify(e.channels||{})})}),t.jsx(m,{children:t.jsx(J,{label:e.enable?n("common.enabled"):n("common.disabled"),color:e.enable?"success":"default",size:"small"})}),t.jsx(m,{children:(()=>{const a=e.createdAt||e.created_at;if(!a)return"-";try{const s=new Date(a);return isNaN(s.getTime())?"-":s.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return"-"}})()}),t.jsx(m,{align:"right",children:t.jsxs(_,{direction:"row",spacing:1,justifyContent:"flex-end",children:[t.jsx(H,{title:n("common.edit"),children:t.jsx(F,{size:"small",onClick:()=>ce(e),children:t.jsx(Pe,{fontSize:"small"})})}),t.jsx(H,{title:n("common.delete"),children:t.jsx(F,{size:"small",color:"error",onClick:()=>we(e.id),children:t.jsx(Ee,{fontSize:"small"})})})]})})]},e.id))})]})}),Y>0&&t.jsx(u,{sx:{display:"flex",justifyContent:"center",mt:2},children:t.jsx(Ge,{count:Math.ceil(Y/N),page:E,onChange:(e,a)=>ge(a),color:"primary"})})]})}),t.jsxs(Ne,{open:pe,onClose:U,maxWidth:"md",fullWidth:!0,children:[t.jsx(Oe,{children:S?n("Edit Template")||"编辑告警模板":n("Create Template")||"新建告警模板"}),t.jsx(ze,{children:t.jsxs(_,{spacing:3,sx:{mt:1},children:[t.jsx(b,{label:`${n("Template Name")} *`,value:o.template_name,onChange:e=>g({...o,template_name:e.target.value}),fullWidth:!0,required:!0}),t.jsx(b,{label:n("Description"),value:o.template_desc||"",onChange:e=>g({...o,template_desc:e.target.value}),fullWidth:!0,multiline:!0,rows:2,helperText:n("Template Description Helper")||"模板描述，用于说明该模板的用途和适用场景"}),t.jsxs(C,{severity:"info",sx:{mb:1},children:[t.jsx(h,{variant:"body2",children:t.jsx("strong",{children:n("Template Configuration Note")||"模板配置说明："})}),t.jsx(h,{variant:"body2",sx:{mt:.5},children:n("Template Configuration Step 1")||'1. 首先选择需要绑定的通知渠道（下方"渠道配置"部分）'}),t.jsx(h,{variant:"body2",sx:{mt:.5},children:n("Template Configuration Step 2")||"2. 模板内容（消息格式）需要在创建模板后，通过编辑功能为每个渠道单独配置"}),t.jsx(h,{variant:"body2",sx:{mt:.5},children:n("Template Configuration Step 3")||"3. 模板内容支持变量，例如：{{alert_title}}、{{alert_level}}、{{description}} 等"})]}),t.jsxs(u,{children:[t.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(h,{variant:"subtitle2",children:n("Channels")||"渠道配置"}),t.jsx(H,{title:n("Channels Help")||"渠道配置说明",children:t.jsx(F,{size:"small",onClick:()=>je(!ee),sx:{color:"primary.main"},children:t.jsx(Me,{fontSize:"small"})})})]}),t.jsxs(Ve,{value:Z,onChange:(e,a)=>xe(a),sx:{minHeight:"auto"},children:[t.jsx(he,{label:n("Visual")||"可视化",value:"visual",sx:{minHeight:"auto",py:.5,px:1}}),t.jsx(he,{label:"JSON",value:"json",sx:{minHeight:"auto",py:.5,px:1}})]})]}),t.jsx(ue,{in:ee,timeout:"auto",unmountOnExit:!0,children:t.jsxs(C,{severity:"info",sx:{mb:2},children:[t.jsx(h,{variant:"body2",paragraph:!0,children:t.jsx("strong",{children:n("Channels Explanation")||"渠道配置说明："})}),t.jsx(h,{variant:"body2",paragraph:!0,children:n("Channels Description")||"告警模板的渠道配置用于定义该模板绑定的通知渠道。选择需要使用的渠道后，系统会使用该模板发送告警通知。"}),t.jsxs(h,{variant:"body2",paragraph:!0,children:[t.jsx("strong",{children:n("Template Content Note")||"模板内容说明："}),n("Template Content Description")||"模板内容（消息格式）需要在创建模板后，通过编辑功能为每个渠道单独配置。每个渠道可以配置不同的消息格式和内容。"]}),t.jsx(h,{variant:"body2",component:"div",sx:{fontFamily:"monospace",bgcolor:"grey.100",p:1,borderRadius:1,mt:1},children:`{
  "feishu": [1, 2],
  "dingtalk": [3],
  "email": [4, 5]
}`}),t.jsx(h,{variant:"body2",sx:{mt:1},children:n("Channels Example")||"示例：上面的配置表示该模板绑定飞书渠道ID 1和2，钉钉渠道ID 3，邮件渠道ID 4和5。"})]})}),Z==="json"?t.jsx(b,{label:n("Channels (JSON)"),value:JSON.stringify(o.channels||{},null,2),onChange:e=>{try{const a=JSON.parse(e.target.value);g({...o,channels:a})}catch{}},fullWidth:!0,multiline:!0,rows:6,helperText:n("Channels configuration in JSON format")||'渠道配置（JSON格式），例如：{"feishu": [1, 2], "dingtalk": [3]}'}):t.jsx(u,{children:ye?t.jsx(C,{severity:"info",children:n("common.loading")||"加载渠道中..."}):t.jsx(_,{spacing:2,children:["feishu","dingtalk","wechat","email","sms","webhook"].map(e=>{const a=e==="feishu"?n("Feishu")||"飞书":e==="dingtalk"?n("DingTalk")||"钉钉":e==="wechat"?n("WeChat")||"企业微信":e==="email"?n("Email")||"邮件":e==="sms"?n("SMS")||"短信":e==="webhook"?n("Webhook")||"Webhook":e,s=O.filter(l=>l.channel_type===e),r=o.channels,i=Array.isArray(r?.[e])?r[e]:[];return t.jsxs(u,{children:[t.jsx(R,{multiple:!0,options:s,getOptionLabel:l=>`${l.channel_name} (ID: ${l.id})`,value:s.filter(l=>i.includes(l.id)),onChange:(l,d)=>{const j={...o.channels||{}};d.length===0?delete j[e]:j[e]=d.map(f=>f.id),g({...o,channels:j})},renderInput:l=>t.jsx(b,{...l,label:`${a} ${n("Channels")||"渠道"}`,placeholder:n("Select channels")||"选择渠道"}),renderOption:(l,d)=>c.createElement(u,{component:"li",...l,key:d.id},t.jsxs(u,{children:[t.jsx(h,{variant:"body2",children:d.channel_name}),t.jsxs(h,{variant:"caption",color:"text.secondary",children:[n("Channel Type")||"类型",": ",d.channel_type," | ID: ",d.id]})]})),disabled:s.length===0,noOptionsText:n("No channels available")||"暂无可用渠道"}),s.length===0&&t.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:n("No channels of this type")||`暂无${a}类型的渠道`})]},e)})})})]}),t.jsxs(u,{sx:{mt:3},children:[t.jsx(h,{variant:"h6",gutterBottom:!0,children:n("Notification Configuration")||"通知配置"}),t.jsx(C,{severity:"info",sx:{mb:2},children:t.jsx(h,{variant:"body2",children:n("Notification Configuration Note")||"配置通知成员和告警组。这些配置将与模板绑定，当策略使用该模板时，会通知配置的成员和告警组。"})}),t.jsxs(_,{spacing:2,children:[t.jsx(R,{multiple:!0,size:"small",options:re,getOptionLabel:e=>{if(typeof e=="object"&&e!==null)return e.username||e.fullName||e.id||"未知用户";const a=M.get(String(e));return a?a.username||a.fullName||a.id:e&&e!==0&&e!=="0"?`用户ID: ${e}`:"未知用户"},isOptionEqualToValue:(e,a)=>{if(typeof e=="object"&&e!==null&&typeof a=="object"&&a!==null){const s=String(e.id||""),r=String(a.id||"");return s===r}if(typeof e=="object"&&e!==null){const s=String(e.id||""),r=String(a||"");return s===r}if(typeof a=="object"&&a!==null){const s=String(e||""),r=String(a.id||"");return s===r}return String(e)===String(a)},value:(Array.isArray(o.members)?o.members:[]).filter(a=>a&&a!==""&&a!==0).map(a=>{const s=String(a),r=M.get(s);return r||{id:s,username:"",fullName:""}}).filter(a=>a&&a.id),onChange:(e,a)=>{console.log("onChange newValue:",a);const s=a.map(r=>typeof r=="object"&&r!==null&&r.id?String(r.id):typeof r=="string"?r:typeof r=="number"&&r>0?String(r):null).filter(r=>r!==null&&r!=="");console.log("onChange memberIds:",s),g({...o,members:s})},inputValue:le,onInputChange:(e,a)=>{be(a),_e(a)},onOpen:()=>{!I&&re.length===0&&k()},loading:I,noOptionsText:I?n("common.loading")||"加载中...":le?n("No users found")||"未找到用户":n("Enter username to search")||"输入用户名搜索",filterOptions:e=>e,renderInput:e=>t.jsx(b,{...e,label:n("Notification Members")||"通知成员",placeholder:n("Enter username to search")||"输入用户名搜索",InputProps:{...e.InputProps,endAdornment:t.jsxs(t.Fragment,{children:[I?t.jsx(me,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),renderTags:(e,a)=>e.map((s,r)=>{const i=typeof s=="object"?s:M.get(String(s));let l;if(i)l=i.username||i.fullName||i.id||"未知用户";else if(typeof s=="number"&&s!==0)l=`用户ID: ${s}`;else if(typeof s=="object"&&s!==null){const d=s?.id;l=d&&d!=="0"?`用户ID: ${d}`:"未知用户"}else l=s&&s!==0&&s!=="0"?`用户ID: ${s}`:"未知用户";return c.createElement(J,{...a({index:r}),key:typeof s=="object"?s.id:String(s),label:l,size:"small"})})}),t.jsx(R,{multiple:!0,size:"small",options:D,getOptionLabel:e=>{if(typeof e=="object")return e.group_name||String(e.id);const a=D.find(s=>s.id===e);return a?a.group_name:String(e)},isOptionEqualToValue:(e,a)=>typeof e=="object"&&typeof a=="object"?e.id===a.id:typeof e=="object"&&typeof a=="number"?e.id===a:typeof e=="number"&&typeof a=="object"?e===a.id:e===a,value:(Array.isArray(o.alert_groups)?o.alert_groups:[]).map(a=>D.find(r=>r.id===a)||a),onChange:(e,a)=>{const s=a.map(r=>typeof r=="object"?r.id:r);g({...o,alert_groups:s})},loading:W,noOptionsText:W?n("common.loading")||"加载中...":n("No alert groups found")||"暂无告警组",renderInput:e=>t.jsx(b,{...e,label:n("Alert Groups")||"告警组",placeholder:n("Select alert groups")||"选择告警组",InputProps:{...e.InputProps,endAdornment:t.jsxs(t.Fragment,{children:[W?t.jsx(me,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})}}),renderTags:(e,a)=>e.map((s,r)=>{const i=typeof s=="object"?s:D.find(d=>d.id===s),l=i?i.group_name:String(s);return c.createElement(J,{...a({index:r}),key:typeof s=="object"?s.id:String(s),label:l,size:"small"})})})]})]}),t.jsxs(u,{sx:{mt:3},children:[t.jsx(h,{variant:"h6",gutterBottom:!0,children:n("Template Content Configuration")||"模板内容配置"}),t.jsx(C,{severity:"info",sx:{mb:2},children:t.jsx(h,{variant:"body2",paragraph:!0,children:n("Template Content Configuration Note")||"为每个选中的渠道配置消息格式。模板内容支持变量，例如：{{alert_title}}、{{alert_level}}、{{description}}、{{trigger_time}} 等。"})}),(()=>{const e=[];return o.channels&&typeof o.channels=="object"&&Object.values(o.channels).forEach(a=>{Array.isArray(a)&&e.push(...a)}),e.length===0?t.jsx(C,{severity:"warning",children:n("Please select channels first")||"请先选择渠道"}):t.jsx(_,{spacing:2,children:e.map(a=>{const s=O.find(i=>i.id===a);if(!s)return null;const r=s.channel_type==="feishu"?n("Feishu")||"飞书":s.channel_type==="dingtalk"?n("DingTalk")||"钉钉":s.channel_type==="wechat"?n("WeChat")||"企业微信":s.channel_type==="email"?n("Email")||"邮件":s.channel_type==="sms"?n("SMS")||"短信":s.channel_type==="webhook"?n("Webhook")||"Webhook":s.channel_type;return t.jsxs(u,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,p:2},children:[t.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t.jsxs(h,{variant:"subtitle1",children:[s.channel_name," (",r,")"]}),t.jsx(y,{size:"small",onClick:()=>se(i=>({...i,[a]:!i[a]})),children:ae[a]?n("Collapse")||"收起":n("Expand")||"展开"})]}),t.jsxs(ue,{in:ae[a],children:[t.jsxs(u,{sx:{mb:1,display:"flex",gap:1,justifyContent:"flex-end"},children:[t.jsx(y,{size:"small",startIcon:t.jsx(We,{}),onClick:()=>{const i=`告警标题：{{alert_title}}

告警等级：P{{alert_level}}
告警描述：{{description}}
触发时间：{{trigger_time}}
数据源：{{source_name}}
告警ID：{{alert_id}}
${s.channel_type==="email"?`告警状态：{{alert_status}}
`:""}${s.channel_type==="feishu"||s.channel_type==="dingtalk"||s.channel_type==="wechat"?`详情链接：{{alert_url}}
`:""}
处理建议：
请及时查看告警详情并处理，如已处理请在系统中标记为已解决。`;navigator.clipboard.writeText(i).then(()=>{w(n("Example copied to clipboard")||"示例已复制到剪贴板")}).catch(()=>{x(l=>({...l,[a]:i}))})},children:n("Copy Example")||"复制示例"}),t.jsx(y,{size:"small",startIcon:t.jsx(Ue,{}),onClick:()=>{const l=(z[a]||"").replace(/\n{3,}/g,`

`).replace(/(\{\{[^}]+\}\})/g,`$1
`).replace(/[ \t]+$/gm,"").replace(/\n{3,}/g,`

`).trim();x(d=>({...d,[a]:l})),w(n("Content beautified")||"内容已美化")},children:n("Beautify")||"一键美化"})]}),t.jsx(b,{label:n("Template Content")||"模板内容",value:z[a]||"",onChange:i=>x(l=>({...l,[a]:i.target.value})),fullWidth:!0,multiline:!0,rows:10,placeholder:`告警标题：{{alert_title}}

告警等级：P{{alert_level}}
告警描述：{{description}}
触发时间：{{trigger_time}}
数据源：{{source_name}}
告警ID：{{alert_id}}
${s.channel_type==="email"?`告警状态：{{alert_status}}
`:""}${s.channel_type==="feishu"||s.channel_type==="dingtalk"||s.channel_type==="wechat"?`详情链接：{{alert_url}}
`:""}
处理建议：
请及时查看告警详情并处理，如已处理请在系统中标记为已解决。`,helperText:t.jsxs(u,{sx:{mt:1},children:[t.jsx(C,{severity:"info",sx:{mb:1.5},children:s.channel_type==="feishu"||s.channel_type==="dingtalk"||s.channel_type==="wechat"?n("Template Tips Markdown")||"提示：此渠道支持 Markdown 格式（如 **粗体**、*斜体*、代码块等）":s.channel_type==="email"||s.channel_type==="sms"?n("Template Tips Plain")||"提示：此渠道仅支持纯文本格式，Markdown 格式不会被渲染":n("Template Tips")||"提示：支持使用变量"}),t.jsxs(de,{variant:"outlined",sx:{p:1.5,bgcolor:"grey.50",borderRadius:1},children:[t.jsx(h,{variant:"caption",component:"div",sx:{fontWeight:600,mb:1,display:"block",color:"text.primary"},children:n("Available Variables")||"可用变量："}),t.jsx(h,{variant:"caption",component:"div",sx:{fontFamily:"monospace",fontSize:"0.75rem",lineHeight:1.8,color:"text.secondary",whiteSpace:"pre-line"},children:`${n("Template Var Standard")||"通用变量（所有告警类型）："}
{{alert_title}} - ${n("Alert Title")||"告警标题"}
{{description}} - ${n("Description")||"告警描述"}
{{trigger_time}} - ${n("Trigger Time")||"触发时间"}
{{alert_url}} - ${n("Alert URL")||"告警详情链接"}
{{source_name}} - ${n("Source Name")||"数据源名称"}

${n("Template VarPrometheus")||"Prometheus告警变量（tag_/annotation_）："}
${n("Template VarPrometheusNote")||"Prometheus告警的标签和注解来自Prometheus规则配置，可通过以下方式访问："}
{{tag_alertname}} - ${n("Template VarTagAlertname")||"告警名称（来自Prometheus labels）"}
{{tag_instance}} - ${n("Template VarTagInstance")||"实例地址（来自Prometheus labels）"}
{{tag_job}} - ${n("Template VarTagJob")||"任务名称（来自Prometheus labels）"}
${n("Template VarPrometheusTagNote")||"... 其他标签通过 {{tag_标签名}} 访问"}

{{annotation_summary}} - ${n("Template VarAnnotationSummary")||"摘要（来自Prometheus annotations）"}
{{annotation_description}} - ${n("Description")||"详细描述（来自Prometheus annotations）"}
${n("Template VarPrometheusAnnotationNote")||"... 其他注解通过 {{annotation_注解名}} 访问"}

${n("Template VarCertificate")||"证书告警专用变量（annotation_）："}
{{annotation_domain}} - ${n("Template VarAnnotationDomain")||"域名"}
{{annotation_port}} - ${n("Template VarAnnotationPort")||"端口"}
{{annotation_expire_time}} - ${n("Template VarAnnotationExpireTime")||"过期时间"}
{{annotation_days_left}} - ${n("Template VarAnnotationDaysLeft")||"剩余天数"}
{{annotation_status}} - ${n("Template VarAnnotationStatus")||"状态（即将过期/已过期）"}`})]})]})})]})]},a)})})})()]}),t.jsx(Le,{control:t.jsx(qe,{checked:o.enable??!0,onChange:e=>g({...o,enable:e.target.checked})}),label:n("common.enabled")})]})}),t.jsxs(He,{children:[t.jsx(y,{onClick:U,children:n("common.cancel")}),t.jsx(y,{onClick:ve,variant:"contained",children:n("common.save")})]})]})]})}export{st as default};
