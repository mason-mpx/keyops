import{u as w,r as h,j as e,B as l,C as I,T as n,bi as W,c as P,bj as g,au as N,w as r,x as o,Z as T,cu as R,cv as F,cw as K}from"./index-CJIrazW8.js";import{k as z}from"./k8sClusterApi-CNrfXk7P.js";import{R as f,C as B,X as $,Y as k,T as m,L as p}from"./CartesianChart-4UZAULx2.js";import{B as V,a as A}from"./BarChart-C-G6LBPe.js";import{C as u}from"./tooltipContext-Duk5dMCf.js";import{P as y,a as v}from"./PieChart-DT0zZYvc.js";import{T as E,a as L,b as Y,c as D,d as c,e as H}from"./TableRow-JrGpygSA.js";import{C as O}from"./Chip-Bh8gAKTq.js";import"./value-Cn2IHGIU.js";const x=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658"];function ee(){const{t}=w(),[C,j]=h.useState(!1),[i,b]=h.useState(null);h.useEffect(()=>{S()},[]);const S=async()=>{try{j(!0);const s=await z.getDashboardStatistics();s?b(s):console.error("Failed to fetch k8s dashboard statistics")}catch(s){console.error("Failed to fetch k8s dashboard data:",s),b(null)}finally{j(!1)}};if(C&&!i)return e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsx(I,{})});const d=i?[{name:t("Running")||"运行中",value:i.runningPods,color:"#10b981"},{name:t("Pending")||"等待中",value:i.pendingPods,color:"#f59e0b"},{name:t("Failed")||"失败",value:i.failedPods,color:"#ef4444"}].filter(s=>s.value>0):[];return e.jsxs(l,{sx:{p:3},children:[e.jsx(l,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:e.jsx(n,{variant:"h4",component:"h1",children:t("K8s Dashboard")||"K8s 大盘"})}),e.jsx(l,{sx:{display:"flex",gap:2.5,mb:3,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[{label:t("Total Clusters")||"集群总数",value:i?.totalClusters||0,icon:W,color:"#3b82f6",bg:"#dbeafe"},{label:t("Ready Nodes")||"就绪节点",value:i?.readyNodes||0,subValue:i?.totalNodes||0,icon:P,color:"#10b981",bg:"#d1fae5"},{label:t("Running Pods")||"运行中 Pod",value:i?.runningPods||0,subValue:i?.totalPods||0,icon:g,color:"#8b5cf6",bg:"#ede9fe"},{label:t("Total Namespaces")||"命名空间",value:i?.totalNamespaces||0,icon:N,color:"#f59e0b",bg:"#fef3c7"}].map((s,a)=>e.jsx(l,{sx:{flex:1,minWidth:{xs:"100%",sm:0}},children:e.jsx(r,{elevation:0,sx:{border:"1px solid #e2e8f0",width:"100%",height:{xs:"160px",sm:"180px"},transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.08)",transform:"translateY(-2px)"}},children:e.jsxs(o,{sx:{p:{xs:2.5,sm:3.5},height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",fontWeight:500,sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:s.label}),e.jsx(l,{sx:{width:{xs:40,sm:48},height:{xs:40,sm:48},borderRadius:2.5,backgroundColor:s.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(s.icon,{sx:{fontSize:{xs:24,sm:28},color:s.color}})})]}),e.jsxs(l,{children:[e.jsx(n,{variant:"h2",fontWeight:"700",color:"text.primary",sx:{fontSize:{xs:"2rem",sm:"3rem"}},children:s.value}),s.subValue!==void 0&&e.jsxs(n,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:["/ ",s.subValue," ",t("Total")||"总计"]})]})]})})},a))}),e.jsx(l,{sx:{display:"flex",gap:2.5,mb:3,flexWrap:{xs:"wrap",md:"nowrap"}},children:[{label:t("Deployments")||"Deployment",value:i?.totalDeployments||0,icon:g,color:"#3b82f6"},{label:t("StatefulSets")||"StatefulSet",value:i?.totalStatefulSets||0,icon:T,color:"#10b981"},{label:t("DaemonSets")||"DaemonSet",value:i?.totalDaemonSets||0,icon:R,color:"#f59e0b"},{label:t("Services")||"Service",value:i?.totalServices||0,icon:F,color:"#8b5cf6"},{label:t("Ingresses")||"Ingress",value:i?.totalIngresses||0,icon:K,color:"#ef4444"}].map((s,a)=>e.jsx(l,{sx:{flex:1,minWidth:{xs:"100%",md:"calc(20% - 2rem)"}},children:e.jsx(r,{elevation:0,sx:{border:"1px solid #e2e8f0",width:"100%",height:"140px",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 12px rgba(0,0,0,0.08)",transform:"translateY(-2px)"}},children:e.jsxs(o,{sx:{p:2.5,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",fontWeight:500,sx:{fontSize:"0.75rem"},children:s.label}),e.jsx(s.icon,{sx:{fontSize:24,color:s.color}})]}),e.jsx(n,{variant:"h3",fontWeight:"700",color:"text.primary",sx:{fontSize:"2rem"},children:s.value})]})})},a))}),e.jsxs(l,{sx:{display:"flex",gap:2.5,mb:3,flexWrap:{xs:"wrap",md:"nowrap"}},children:[e.jsx(l,{sx:{flex:1,minWidth:{xs:"100%",md:"calc(50% - 1.25rem)"}},children:e.jsx(r,{elevation:0,sx:{border:"1px solid #e2e8f0",height:"400px"},children:e.jsxs(o,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(n,{variant:"h6",fontWeight:600,mb:2,children:t("Pod Status Distribution")||"Pod 状态分布"}),d.length>0?e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(V,{data:d,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx($,{dataKey:"name"}),e.jsx(k,{}),e.jsx(m,{}),e.jsx(p,{}),e.jsx(A,{dataKey:"value",fill:"#8884d8",children:d.map((s,a)=>e.jsx(u,{fill:s.color},`cell-${a}`))})]})}):e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary"},children:t("No Data")||"暂无数据"})]})})}),e.jsx(l,{sx:{flex:1,minWidth:{xs:"100%",md:"calc(50% - 1.25rem)"}},children:e.jsx(r,{elevation:0,sx:{border:"1px solid #e2e8f0",height:"400px"},children:e.jsxs(o,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(n,{variant:"h6",fontWeight:600,mb:2,children:t("Pod Distribution by Cluster")||"Pod 分布（按集群）"}),i?.podDistribution&&i.podDistribution.length>0?e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(y,{children:[e.jsx(v,{data:i.podDistribution,dataKey:"value",nameKey:"clusterName",cx:"50%",cy:"50%",outerRadius:100,label:s=>`${s.clusterName||""}: ${s.value||0}`,children:i.podDistribution.map((s,a)=>e.jsx(u,{fill:x[a%x.length]},`cell-${a}`))}),e.jsx(m,{}),e.jsx(p,{})]})}):e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary"},children:t("No Data")||"暂无数据"})]})})})]}),e.jsxs(l,{sx:{display:"flex",gap:2.5,mb:3,flexWrap:{xs:"wrap",md:"nowrap"}},children:[e.jsx(l,{sx:{flex:1,minWidth:{xs:"100%",md:"calc(50% - 1.25rem)"}},children:e.jsx(r,{elevation:0,sx:{border:"1px solid #e2e8f0",height:"400px"},children:e.jsxs(o,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(n,{variant:"h6",fontWeight:600,mb:2,children:t("Node Distribution by Cluster")||"Node 分布（按集群）"}),i?.nodeDistribution&&i.nodeDistribution.length>0?e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(y,{children:[e.jsx(v,{data:i.nodeDistribution,dataKey:"value",nameKey:"clusterName",cx:"50%",cy:"50%",outerRadius:100,label:s=>`${s.clusterName||""}: ${s.value||0}`,children:i.nodeDistribution.map((s,a)=>e.jsx(u,{fill:x[a%x.length]},`cell-${a}`))}),e.jsx(m,{}),e.jsx(p,{})]})}):e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary"},children:t("No Data")||"暂无数据"})]})})}),e.jsx(l,{sx:{flex:1,minWidth:{xs:"100%",md:"calc(50% - 1.25rem)"}},children:e.jsx(r,{elevation:0,sx:{border:"1px solid #e2e8f0",height:"400px"},children:e.jsxs(o,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(n,{variant:"h6",fontWeight:600,mb:2,children:t("Version Distribution")||"版本分布"}),i?.versionDistribution&&i.versionDistribution.length>0?e.jsx(E,{children:e.jsxs(L,{size:"small",children:[e.jsx(Y,{children:e.jsxs(D,{children:[e.jsx(c,{children:e.jsx("strong",{children:t("Version")||"版本"})}),e.jsx(c,{align:"right",children:e.jsx("strong",{children:t("Count")||"数量"})})]})}),e.jsx(H,{children:i.versionDistribution.map((s,a)=>e.jsxs(D,{children:[e.jsx(c,{children:e.jsx(O,{label:s.version,size:"small",color:"primary"})}),e.jsx(c,{align:"right",children:e.jsx(n,{variant:"body2",fontWeight:600,children:s.count})})]},a))})]})}):e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary"},children:t("No Data")||"暂无数据"})]})})})]})]})}export{ee as default};
