const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/asciinema-player-DXeTZHQs.css"])))=>i.map(i=>d[i]);
import{r as l,aE as kt,aF as ke,aG as St,aH as Pt,aI as qe,aJ as $e,aK as Xe,aL as tt,aM as Ne,aj as jt,ak as wt,j as t,an as Pe,al as Ct,aN as Rt,am as ae,af as ge,aO as ie,ao as Tt,ah as ye,aP as Qe,aQ as ft,aR as ot,B as E,I as B,aS as gt,aT as Ze,f as et,aU as mt,aV as ht,C as Se,b as Lt,T as D,aW as It,aX as At,aY as Et,aZ as Mt,u as zt,aC as Je,v as Dt,w as nt,x as rt,m as Ft,s as Ht,t as $t,d as Nt,a_ as Vt,a$ as st,i as Ot,k as Gt,aB as Wt,l as _t}from"./index-CJIrazW8.js";import{G as at}from"./guacamole-common-DCnKliOq.js";import{L as Bt}from"./LinearProgress-BlyF6pus.js";import{T as Ut,a as Yt,b as Kt,c as it,d as W,e as qt}from"./TableRow-JrGpygSA.js";import{C as Me}from"./Chip-Bh8gAKTq.js";import{T as Xt}from"./TablePagination-BC9Ek9KZ.js";import"./LastPage-CClrOV-o.js";const Jt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Qt(e,o,s=(i,x)=>i===x){return e.length===o.length&&e.every((i,x)=>s(i,o[x]))}const Zt=2;function xe(e,o,s,i,x){return s===1?Math.min(e+o,x):Math.max(e-o,i)}function xt(e,o){return e-o}function lt(e,o){const{index:s}=e.reduce((i,x,u)=>{const F=Math.abs(o-x);return i===null||F<i.distance||F===i.distance?{distance:F,index:u}:i},null)??{};return s}function ze(e,o){if(o.current!==void 0&&e.changedTouches){const s=e;for(let i=0;i<s.changedTouches.length;i+=1){const x=s.changedTouches[i];if(x.identifier===o.current)return{x:x.clientX,y:x.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ve(e,o,s){return(e-o)*100/(s-o)}function eo(e,o,s){return(s-o)*e+o}function to(e){if(Math.abs(e)<1){const s=e.toExponential().split("e-"),i=s[0].split(".")[1];return(i?i.length:0)+parseInt(s[1],10)}const o=e.toString().split(".")[1];return o?o.length:0}function oo(e,o,s){const i=Math.round((e-s)/o)*o+s;return Number(i.toFixed(to(o)))}function ct({values:e,newValue:o,index:s}){const i=e.slice();return i[s]=o,i.sort(xt)}function De({sliderRef:e,activeIndex:o,setActive:s}){const i=$e(e.current);(!e.current?.contains(i.activeElement)||Number(i?.activeElement?.getAttribute("data-index"))!==o)&&e.current?.querySelector(`[type="range"][data-index="${o}"]`).focus(),s&&s(o)}function Fe(e,o){return typeof e=="number"&&typeof o=="number"?e===o:typeof e=="object"&&typeof o=="object"?Qt(e,o):!1}const no={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},ro=e=>e;let He;function dt(){return He===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?He=CSS.supports("touch-action","none"):He=!0),He}function so(e){const{"aria-labelledby":o,defaultValue:s,disabled:i=!1,disableSwap:x=!1,isRtl:u=!1,marks:F=!1,max:y=100,min:m=0,name:T,onChange:N,onChangeCommitted:G,orientation:H="horizontal",rootRef:V,scale:d=ro,step:c=1,shiftStep:L=10,tabIndex:h,value:M}=e,P=l.useRef(void 0),[p,j]=l.useState(-1),[K,I]=l.useState(-1),[X,ne]=l.useState(!1),Z=l.useRef(0),g=l.useRef(null),[k,r]=kt({controlled:M,default:s??m,name:"Slider"}),f=N&&((a,n,b)=>{const C=a.nativeEvent||a,w=new C.constructor(C.type,C);Object.defineProperty(w,"target",{writable:!0,value:{value:n,name:T}}),g.current=n,N(w,n,b)}),R=Array.isArray(k);let S=R?k.slice().sort(xt):[k];S=S.map(a=>a==null?m:ke(a,m,y));const ee=F===!0&&c!==null?[...Array(Math.floor((y-m)/c)+1)].map((a,n)=>({value:m+c*n})):F||[],z=ee.map(a=>a.value),[se,me]=l.useState(-1),A=l.useRef(null),le=St(V,A),Oe=a=>n=>{const b=Number(n.currentTarget.getAttribute("data-index"));tt(n.target)&&me(b),I(b),a?.onFocus?.(n)},Ge=a=>n=>{tt(n.target)||me(-1),I(-1),a?.onBlur?.(n)},je=(a,n)=>{const b=Number(a.currentTarget.getAttribute("data-index")),C=S[b],w=z.indexOf(C);let v=n;if(ee&&c==null){const q=z[z.length-1];v>=q?v=q:v<=z[0]?v=z[0]:v=v<C?z[w-1]:z[w+1]}if(v=ke(v,m,y),R){x&&(v=ke(v,S[b-1]||-1/0,S[b+1]||1/0));const q=v;v=ct({values:S,newValue:v,index:b});let J=b;x||(J=v.indexOf(q)),De({sliderRef:A,activeIndex:J})}r(v),me(b),f&&!Fe(v,k)&&f(a,v,b),G&&G(a,g.current??v)},We=a=>n=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(n.key)){n.preventDefault();const b=Number(n.currentTarget.getAttribute("data-index")),C=S[b];let w=null;if(c!=null){const v=n.shiftKey?L:c;switch(n.key){case"ArrowUp":w=xe(C,v,1,m,y);break;case"ArrowRight":w=xe(C,v,u?-1:1,m,y);break;case"ArrowDown":w=xe(C,v,-1,m,y);break;case"ArrowLeft":w=xe(C,v,u?1:-1,m,y);break;case"PageUp":w=xe(C,L,1,m,y);break;case"PageDown":w=xe(C,L,-1,m,y);break;case"Home":w=m;break;case"End":w=y;break}}else if(ee){const v=z[z.length-1],q=z.indexOf(C),J=[u?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],O=[u?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];J.includes(n.key)?q===0?w=z[0]:w=z[q-1]:O.includes(n.key)&&(q===z.length-1?w=v:w=z[q+1])}w!=null&&je(n,w)}a?.onKeyDown?.(n)};Pt(()=>{i&&A.current.contains(document.activeElement)&&document.activeElement?.blur()},[i]),i&&p!==-1&&j(-1),i&&se!==-1&&me(-1);const we=a=>n=>{a.onChange?.(n),je(n,n.target.valueAsNumber)},ce=l.useRef(void 0);let de=H;u&&H==="horizontal"&&(de+="-reverse");const ue=({finger:a,move:n=!1})=>{const{current:b}=A,{width:C,height:w,bottom:v,left:q}=b.getBoundingClientRect();let J;de.startsWith("vertical")?J=(v-a.y)/w:J=(a.x-q)/C,de.includes("-reverse")&&(J=1-J);let O;if(O=eo(J,m,y),c)O=oo(O,c,m);else{const ve=lt(z,O);O=z[ve]}O=ke(O,m,y);let oe=0;if(R){n?oe=ce.current:oe=lt(S,O),x&&(O=ke(O,S[oe-1]||-1/0,S[oe+1]||1/0));const ve=O;O=ct({values:S,newValue:O,index:oe}),x&&n||(oe=O.indexOf(ve),ce.current=oe)}return{newValue:O,activeIndex:oe}},pe=qe(a=>{const n=ze(a,P);if(!n)return;if(Z.current+=1,a.type==="mousemove"&&a.buttons===0){te(a);return}const{newValue:b,activeIndex:C}=ue({finger:n,move:!0});De({sliderRef:A,activeIndex:C,setActive:j}),r(b),!X&&Z.current>Zt&&ne(!0),f&&!Fe(b,k)&&f(a,b,C)}),te=qe(a=>{const n=ze(a,P);if(ne(!1),!n)return;const{newValue:b}=ue({finger:n,move:!0});j(-1),a.type==="touchend"&&I(-1),G&&G(a,g.current??b),P.current=void 0,fe()}),U=qe(a=>{if(i)return;dt()||a.preventDefault();const n=a.changedTouches[0];n!=null&&(P.current=n.identifier);const b=ze(a,P);if(b!==!1){const{newValue:w,activeIndex:v}=ue({finger:b});De({sliderRef:A,activeIndex:v,setActive:j}),r(w),f&&!Fe(w,k)&&f(a,w,v)}Z.current=0;const C=$e(A.current);C.addEventListener("touchmove",pe,{passive:!0}),C.addEventListener("touchend",te,{passive:!0})}),fe=l.useCallback(()=>{const a=$e(A.current);a.removeEventListener("mousemove",pe),a.removeEventListener("mouseup",te),a.removeEventListener("touchmove",pe),a.removeEventListener("touchend",te)},[te,pe]);l.useEffect(()=>{const{current:a}=A;return a.addEventListener("touchstart",U,{passive:dt()}),()=>{a.removeEventListener("touchstart",U),fe()}},[fe,U]),l.useEffect(()=>{i&&fe()},[i,fe]);const _e=a=>n=>{if(a.onMouseDown?.(n),i||n.defaultPrevented||n.button!==0)return;n.preventDefault();const b=ze(n,P);if(b!==!1){const{newValue:w,activeIndex:v}=ue({finger:b});De({sliderRef:A,activeIndex:v,setActive:j}),r(w),f&&!Fe(w,k)&&f(n,w,v)}Z.current=0;const C=$e(A.current);C.addEventListener("mousemove",pe,{passive:!0}),C.addEventListener("mouseup",te)},Ce=Ve(R?S[0]:m,m,y),Y=Ve(S[S.length-1],m,y)-Ce,be=(a={})=>{const n=Xe(a),b={onMouseDown:_e(n||{})},C={...n,...b};return{...a,ref:le,...C}},Re=a=>n=>{a.onMouseOver?.(n);const b=Number(n.currentTarget.getAttribute("data-index"));I(b)},Te=a=>n=>{a.onMouseLeave?.(n),I(-1)},Le=(a={})=>{const n=Xe(a),b={onMouseOver:Re(n||{}),onMouseLeave:Te(n||{})};return{...a,...n,...b}},Ie=a=>({pointerEvents:p!==-1&&p!==a?"none":void 0});let he;return H==="vertical"&&(he=u?"vertical-rl":"vertical-lr"),{active:p,axis:de,axisProps:no,dragging:X,focusedThumbIndex:se,getHiddenInputProps:(a={})=>{const n=Xe(a),b={onChange:we(n||{}),onFocus:Oe(n||{}),onBlur:Ge(n||{}),onKeyDown:We(n||{})},C={...n,...b};return{tabIndex:h,"aria-labelledby":o,"aria-orientation":H,"aria-valuemax":d(y),"aria-valuemin":d(m),name:T,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":e.step??void 0,disabled:i,...a,...C,style:{...Jt,direction:u?"rtl":"ltr",width:"100%",height:"100%",writingMode:he}}},getRootProps:be,getThumbProps:Le,marks:ee,open:K,range:R,rootRef:le,trackLeap:Y,trackOffset:Ce,values:S,getThumbStyle:Ie}}const ao=e=>!e||!Ne(e);function io(e){return wt("MuiSlider",e)}const Q=jt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),lo=e=>{const{open:o}=e;return{offset:Pe(o&&Q.valueLabelOpen),circle:Q.valueLabelCircle,label:Q.valueLabelLabel}};function co(e){const{children:o,className:s,value:i}=e,x=lo(e);return o?l.cloneElement(o,{className:o.props.className},t.jsxs(l.Fragment,{children:[o.props.children,t.jsx("span",{className:Pe(x.offset,s),"aria-hidden":!0,children:t.jsx("span",{className:x.circle,children:t.jsx("span",{className:x.label,children:i})})})]})):null}function ut(e){return e}const uo=ge("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o[`color${ie(s.color)}`],s.size!=="medium"&&o[`size${ie(s.size)}`],s.marked&&o.marked,s.orientation==="vertical"&&o.vertical,s.track==="inverted"&&o.trackInverted,s.track===!1&&o.trackFalse]}})(ye(({theme:e})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Q.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Q.dragging}`]:{[`& .${Q.thumb}, & .${Q.track}`]:{transition:"none"}},variants:[...Object.entries(e.palette).filter(Qe()).map(([o])=>({props:{color:o},style:{color:(e.vars||e).palette[o].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),po=ge("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),fo=ge("span",{name:"MuiSlider",slot:"Track"})(ye(({theme:e})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(e.palette).filter(Qe()).map(([o])=>({props:{color:o,track:"inverted"},style:{...e.vars?{backgroundColor:e.vars.palette.Slider[`${o}Track`],borderColor:e.vars.palette.Slider[`${o}Track`]}:{backgroundColor:e.lighten(e.palette[o].main,.62),borderColor:e.lighten(e.palette[o].main,.62),...e.applyStyles("dark",{backgroundColor:e.darken(e.palette[o].main,.5)}),...e.applyStyles("dark",{borderColor:e.darken(e.palette[o].main,.5)})}}}))]}))),go=ge("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.thumb,o[`thumbColor${ie(s.color)}`],s.size!=="medium"&&o[`thumbSize${ie(s.size)}`]]}})(ye(({theme:e})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Q.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(e.palette).filter(Qe()).map(([o])=>({props:{color:o},style:{[`&:hover, &.${Q.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.alpha((e.vars||e).palette[o].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Q.active}`]:{boxShadow:`0px 0px 0px 14px ${e.alpha((e.vars||e).palette[o].main,.16)}`}}}))]}))),mo=ge(co,{name:"MuiSlider",slot:"ValueLabel"})(ye(({theme:e})=>({zIndex:1,whiteSpace:"nowrap",...e.typography.body2,fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Q.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Q.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),ho=ge("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>ft(e)&&e!=="markActive",overridesResolver:(e,o)=>{const{markActive:s}=e;return[o.mark,s&&o.markActive]}})(ye(({theme:e})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}}]}))),xo=ge("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>ft(e)&&e!=="markLabelActive"})(ye(({theme:e})=>({...e.typography.body2,color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(e.vars||e).palette.text.primary}}]}))),yo=e=>{const{disabled:o,dragging:s,marked:i,orientation:x,track:u,classes:F,color:y,size:m}=e,T={root:["root",o&&"disabled",s&&"dragging",i&&"marked",x==="vertical"&&"vertical",u==="inverted"&&"trackInverted",u===!1&&"trackFalse",y&&`color${ie(y)}`,m&&`size${ie(m)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",o&&"disabled",m&&`thumbSize${ie(m)}`,y&&`thumbColor${ie(y)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Tt(T,io,F)},bo=({children:e})=>e,pt=l.forwardRef(function(o,s){const i=Ct({props:o,name:"MuiSlider"}),x=Rt(),{"aria-label":u,"aria-valuetext":F,"aria-labelledby":y,component:m="span",components:T={},componentsProps:N={},color:G="primary",classes:H,className:V,disableSwap:d=!1,disabled:c=!1,getAriaLabel:L,getAriaValueText:h,marks:M=!1,max:P=100,min:p=0,name:j,onChange:K,onChangeCommitted:I,orientation:X="horizontal",shiftStep:ne=10,size:Z="medium",step:g=1,scale:k=ut,slotProps:r,slots:f,tabIndex:R,track:S="normal",value:ee,valueLabelDisplay:z="off",valueLabelFormat:se=ut,...me}=i,A={...i,isRtl:x,max:P,min:p,classes:H,disabled:c,disableSwap:d,orientation:X,marks:M,color:G,size:Z,step:g,shiftStep:ne,scale:k,track:S,valueLabelDisplay:z,valueLabelFormat:se},{axisProps:le,getRootProps:Oe,getHiddenInputProps:Ge,getThumbProps:je,open:We,active:we,axis:ce,focusedThumbIndex:de,range:ue,dragging:pe,marks:te,values:U,trackOffset:fe,trackLeap:_e,getThumbStyle:Ce}=so({...A,rootRef:s});A.marked=te.length>0&&te.some($=>$.label),A.dragging=pe,A.focusedThumbIndex=de;const Y=yo(A),be=f?.root??T.Root??uo,Re=f?.rail??T.Rail??po,Te=f?.track??T.Track??fo,Le=f?.thumb??T.Thumb??go,Ie=f?.valueLabel??T.ValueLabel??mo,he=f?.mark??T.Mark??ho,Ae=f?.markLabel??T.MarkLabel??xo,a=f?.input??T.Input??"input",n=r?.root??N.root,b=r?.rail??N.rail,C=r?.track??N.track,w=r?.thumb??N.thumb,v=r?.valueLabel??N.valueLabel,q=r?.mark??N.mark,J=r?.markLabel??N.markLabel,O=r?.input??N.input,oe=ae({elementType:be,getSlotProps:Oe,externalSlotProps:n,externalForwardedProps:me,additionalProps:{...ao(be)&&{as:m}},ownerState:{...A,...n?.ownerState},className:[Y.root,V]}),ve=ae({elementType:Re,externalSlotProps:b,ownerState:A,className:Y.rail}),yt=ae({elementType:Te,externalSlotProps:C,additionalProps:{style:{...le[ce].offset(fe),...le[ce].leap(_e)}},ownerState:{...A,...C?.ownerState},className:Y.track}),Be=ae({elementType:Le,getSlotProps:je,externalSlotProps:w,ownerState:{...A,...w?.ownerState},className:Y.thumb}),bt=ae({elementType:Ie,externalSlotProps:v,ownerState:{...A,...v?.ownerState},className:Y.valueLabel}),Ue=ae({elementType:he,externalSlotProps:q,ownerState:A,className:Y.mark}),Ye=ae({elementType:Ae,externalSlotProps:J,ownerState:A,className:Y.markLabel}),vt=ae({elementType:a,getSlotProps:Ge,externalSlotProps:O,ownerState:A});return t.jsxs(be,{...oe,children:[t.jsx(Re,{...ve}),t.jsx(Te,{...yt}),te.filter($=>$.value>=p&&$.value<=P).map(($,_)=>{const Ke=Ve($.value,p,P),Ee=le[ce].offset(Ke);let re;return S===!1?re=U.includes($.value):re=S==="normal"&&(ue?$.value>=U[0]&&$.value<=U[U.length-1]:$.value<=U[0])||S==="inverted"&&(ue?$.value<=U[0]||$.value>=U[U.length-1]:$.value>=U[0]),t.jsxs(l.Fragment,{children:[t.jsx(he,{"data-index":_,...Ue,...!Ne(he)&&{markActive:re},style:{...Ee,...Ue.style},className:Pe(Ue.className,re&&Y.markActive)}),$.label!=null?t.jsx(Ae,{"aria-hidden":!0,"data-index":_,...Ye,...!Ne(Ae)&&{markLabelActive:re},style:{...Ee,...Ye.style},className:Pe(Y.markLabel,Ye.className,re&&Y.markLabelActive),children:$.label}):null]},_)}),U.map(($,_)=>{const Ke=Ve($,p,P),Ee=le[ce].offset(Ke),re=z==="off"?bo:Ie;return t.jsx(re,{...!Ne(re)&&{valueLabelFormat:se,valueLabelDisplay:z,value:typeof se=="function"?se(k($),_):se,index:_,open:We===_||we===_||z==="on",disabled:c},...bt,children:t.jsx(Le,{"data-index":_,...Be,className:Pe(Y.thumb,Be.className,we===_&&Y.active,de===_&&Y.focusVisible),style:{...Ee,...Ce(_),...Be.style},children:t.jsx(a,{"data-index":_,"aria-label":L?L(_):u,"aria-valuenow":k($),"aria-labelledby":y,"aria-valuetext":h?h(k($),_):F,value:U[_],...vt})})},_)})]})});function vo({sessionId:e,recording:o,cols:s=120,rows:i=30}){const x=l.useRef(null),u=l.useRef(null),[F,y]=l.useState(!0),[m,T]=l.useState(null),[N,G]=l.useState(!0),H=l.useCallback(async M=>{try{console.log("[AsciinemaPlayer] Loading asciinema-player module...");const[P]=await Promise.all([ot(()=>import("./index-BfNbCSMK.js"),[]),ot(()=>Promise.resolve({}),__vite__mapDeps([0]))]);console.log("[AsciinemaPlayer] Module loaded successfully");const p=P.default?.create||P.create;if(!p)throw new Error("asciinema-player create function not found");M.innerHTML="";const j=new Blob([o],{type:"text/plain"}),K=URL.createObjectURL(j);console.log("[AsciinemaPlayer] Blob URL created:",K),console.log("[AsciinemaPlayer] Recording preview:",o.substring(0,100));const I=p(K,M,{cols:s,rows:i,autoPlay:!0,loop:!1,startAt:0,speed:1,idleTimeLimit:2,preload:!0,theme:"monokai",fit:"width",terminalFontSize:"14px",terminalLineHeight:1.4,terminalFontFamily:'Consolas, Menlo, "Courier New", monospace'});console.log("[AsciinemaPlayer] Player config:",{autoPlay:!0,loop:!1}),console.log("[AsciinemaPlayer] Player created with methods:",{hasPlay:typeof I.play=="function",hasPause:typeof I.pause=="function",hasSeek:typeof I.seek=="function"}),u.current=I,I.addEventListener?.("play",()=>{console.log("[AsciinemaPlayer] Playing"),G(!0)}),I.addEventListener?.("pause",()=>{console.log("[AsciinemaPlayer] Paused"),G(!1)}),I.addEventListener?.("ended",()=>{console.log("[AsciinemaPlayer] Ended - stopping playback"),G(!1),I.pause&&I.pause()}),console.log("[AsciinemaPlayer]  Player created successfully"),y(!1),T(null)}catch(P){console.error("[AsciinemaPlayer]  Failed to load player:",P),T("播放器加载失败: "+P.message),y(!1)}},[o,s,i]);l.useLayoutEffect(()=>{if(console.log("[AsciinemaPlayer] useLayoutEffect triggered (同步执行)"),console.log("[AsciinemaPlayer] Session:",e),console.log("[AsciinemaPlayer] Recording size:",o?.length||0),!o||o.trim()===""){y(!1),T("没有可用的录制数据");return}let M=0;const P=50;let p=null;const j=()=>{M++,console.log(`[AsciinemaPlayer] Checking DOM (attempt ${M}/${P})...`),console.log("[AsciinemaPlayer] playerDivRef.current:",x.current?"EXISTS ":"null "),x.current?(console.log("[AsciinemaPlayer]  DOM is ready! Starting player..."),p&&clearInterval(p),H(x.current)):M>=P&&(console.error("[AsciinemaPlayer]  Timeout waiting for DOM"),p&&clearInterval(p),y(!1),T("播放器容器未就绪（超时）"))};return j(),p=setInterval(j,100),()=>{p&&clearInterval(p)}},[e,o,s,i,H]);const V=()=>{u.current&&u.current.play()},d=()=>{u.current&&u.current.pause()},c=()=>{u.current&&(u.current.seek(0),u.current.play())},L=()=>{if(u.current&&u.current.getCurrentTime){const M=u.current.getCurrentTime();u.current.seek(M+5)}},h=()=>{if(u.current&&u.current.getCurrentTime){const M=u.current.getCurrentTime();u.current.seek(Math.max(0,M-5))}};return t.jsxs(E,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#000",borderRadius:1,overflow:"hidden",position:"relative","& > div:first-of-type":{"&::-webkit-scrollbar":{width:"14px"},"&::-webkit-scrollbar-track":{background:"rgba(255, 255, 255, 0.05)"},"&::-webkit-scrollbar-thumb":{background:"rgba(102, 126, 234, 0.7)",borderRadius:"7px",border:"3px solid rgba(0, 0, 0, 1)"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(102, 126, 234, 0.9)"}},"& .asciinema-player-wrapper":{width:"100%",height:"auto",maxHeight:"600px",overflowY:"scroll","&::-webkit-scrollbar":{width:"12px"},"&::-webkit-scrollbar-track":{background:"rgba(255, 255, 255, 0.05)",borderRadius:"0 0 8px 0"},"&::-webkit-scrollbar-thumb":{background:"rgba(102, 126, 234, 0.6)",borderRadius:"6px",border:"2px solid transparent",backgroundClip:"padding-box"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(102, 126, 234, 0.8)"}},"& .asciinema-player":{width:"100%",height:"auto"},"& .asciinema-terminal":{minHeight:"450px",paddingBottom:"20px"},"& .asciinema-terminal pre":{paddingBottom:"20px !important",marginBottom:"0 !important"},"& .control-bar":{display:"flex !important",visibility:"visible !important",background:"rgba(0, 0, 0, 0.9) !important",padding:"10px !important",borderTop:"1px solid rgba(255, 255, 255, 0.1) !important"},"& .playback-button":{display:"inline-block !important"}},children:[t.jsx("div",{ref:x,style:{width:"100%",flex:"1",overflowY:"scroll",visibility:F||m?"hidden":"visible"}}),!F&&!m&&t.jsx(E,{sx:{width:"100%",padding:"16px 0",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#000",borderTop:"1px solid rgba(255,255,255,0.1)",flexShrink:0},children:t.jsxs(E,{sx:{background:"linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.9))",backdropFilter:"blur(10px)",padding:"10px 20px",borderRadius:"30px",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",gap:1},children:[t.jsx(B,{onClick:h,sx:{color:"white"},title:"后退 5 秒",children:t.jsx(gt,{})}),N?t.jsx(B,{onClick:d,sx:{color:"white",backgroundColor:"rgba(255,255,255,0.1)","&:hover":{backgroundColor:"rgba(255,255,255,0.2)"}},title:"暂停",children:t.jsx(Ze,{sx:{fontSize:32}})}):t.jsx(B,{onClick:V,sx:{color:"white",backgroundColor:"rgba(102,126,234,0.8)","&:hover":{backgroundColor:"rgba(102,126,234,1)"}},title:"播放",children:t.jsx(et,{sx:{fontSize:32}})}),t.jsx(B,{onClick:L,sx:{color:"white"},title:"前进 5 秒",children:t.jsx(mt,{})}),t.jsx(E,{sx:{width:24}}),t.jsx(B,{onClick:c,sx:{color:"white"},title:"重新开始",children:t.jsx(ht,{})})]})}),F&&t.jsx(E,{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"rgba(30, 30, 30, 0.9)",children:t.jsx(Se,{sx:{color:"#667eea"}})}),m&&!F&&t.jsx(E,{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",p:2,children:t.jsxs(Lt,{severity:"warning",children:[t.jsx(D,{variant:"body1",gutterBottom:!0,children:m}),m==="没有可用的录制数据"&&t.jsx(D,{variant:"body2",color:"text.secondary",children:"该会话可能在录制完成前被中断，或录制功能未正常工作。"})]})})]})}function ko({sessionId:e,playbackUrl:o}){const s=l.useRef(null),i=l.useRef(null),[x,u]=l.useState(0),[F,y]=l.useState(0),[m,T]=l.useState(!1);l.useEffect(()=>{const d=setInterval(()=>{const c=i.current;c&&typeof c.getPosition=="function"&&y(c.getPosition()),c&&typeof c.getDuration=="function"&&u(c.getDuration())},300);return()=>clearInterval(d)},[]),l.useEffect(()=>{if(!o||!s.current){console.warn("[GuacRecordingPlayer] Missing playbackUrl or containerRef");return}console.log("[GuacRecordingPlayer] Initializing player with playbackUrl:",o),console.log("[GuacRecordingPlayer] SessionId:",e),s.current.innerHTML="";try{console.log("[GuacRecordingPlayer] Creating StaticHTTPTunnel...");const d=new at.StaticHTTPTunnel(o);console.log("[GuacRecordingPlayer] StaticHTTPTunnel created:",d),d&&typeof d.onerror=="function"&&(d.onerror=p=>{console.error("[GuacRecordingPlayer] Tunnel error:",p)}),console.log("[GuacRecordingPlayer] Creating SessionRecording...");const c=new at.SessionRecording(d);i.current=c,console.log("[GuacRecordingPlayer] SessionRecording created:",c),c&&typeof c.onerror=="function"&&(c.onerror=p=>{console.error("[GuacRecordingPlayer] Recording error:",p)}),typeof c.onstatechange=="function"&&(c.onstatechange=p=>{console.log("[GuacRecordingPlayer] Recording state changed:",p),T(p===1)}),typeof c.onprogress=="function"&&(c.onprogress=p=>{console.log("[GuacRecordingPlayer] Recording progress:",p)});const L=c.getDisplay(),h=L.getElement();h.style.width="100%",h.style.height="100%",h.style.backgroundColor="#000",h.style.display="block",h.style.visibility="visible",h.style.opacity="1",h.style.position="relative",h.querySelectorAll("canvas").forEach(p=>{const j=p;j.style.display="block",j.style.visibility="visible",j.style.opacity="1",j.style.width="100%",j.style.height="100%",j.style.objectFit="contain"}),s.current.appendChild(h),console.log("[GuacRecordingPlayer] Display element appended");const P=()=>{if(typeof c.getDuration=="function"){const p=c.getDuration();if(p&&p>0)return console.log("[GuacRecordingPlayer] Recording duration:",p),u(p),typeof c.seek=="function"&&(console.log("[GuacRecordingPlayer] Seeking to start (0ms) to initialize display..."),c.seek(0),setTimeout(()=>{const j=L.getElement();j&&(j.style.display="block",j.style.visibility="visible",j.style.opacity="1",j.querySelectorAll("canvas").forEach(I=>{const X=I;X.style.display="block",X.style.visibility="visible",X.style.opacity="1"}),console.log("[GuacRecordingPlayer] Display initialized, ready to play"))},100)),!0}return!1};d.onstatechange=p=>{console.log("[GuacRecordingPlayer] Tunnel state changed:",p),p===1&&(console.log("[GuacRecordingPlayer] Tunnel opened, initializing recording..."),setTimeout(()=>{if(P())console.log("[GuacRecordingPlayer] Recording initialized successfully");else{let j=0;const K=setInterval(()=>{j++,(P()||j>20)&&(clearInterval(K),j>20&&console.warn("[GuacRecordingPlayer] Failed to initialize recording after retries"))},200)}},500))},console.log("[GuacRecordingPlayer] Calling rec.connect()..."),c.connect(),console.log("[GuacRecordingPlayer] rec.connect() called")}catch(d){console.error("[GuacRecordingPlayer] Error initializing player:",d)}return()=>{const d=i.current;if(d&&typeof d.disconnect=="function")try{d.disconnect()}catch(c){console.error("[GuacRecordingPlayer] Error disconnecting:",c)}i.current=null}},[o,e]);const N=()=>{const d=i.current;if(d)if(m)typeof d.pause=="function"&&d.pause(),T(!1);else{const c=d.getDisplay?.();if(c){const L=c.getElement?.();L&&(L.style.display="block",L.style.visibility="visible",L.style.opacity="1",L.querySelectorAll("canvas").forEach(M=>{const P=M;P.style.display="block",P.style.visibility="visible",P.style.opacity="1"}))}typeof d.seek=="function"&&(d.getPosition?.()===0||!d.getPosition)&&d.seek(0),typeof d.play=="function"&&d.play(),T(!0)}},G=()=>{const d=i.current;!d||typeof d.seek!="function"||(d.seek(0),!m&&typeof d.play=="function"&&d.play(),T(!0),y(0))},H=d=>{const c=i.current;if(!c||typeof c.seek!="function")return;const L=Math.max(0,Math.min(x||0,(c.getPosition?.()||0)+d));c.seek(L),y(L)},V=x>0?Math.min(100,F/x*100):0;return t.jsxs(E,{sx:{display:"flex",flexDirection:"column",height:"100%",background:"#000"},children:[t.jsx(E,{ref:s,sx:{flex:1,minHeight:400,backgroundColor:"#000",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}}),t.jsxs(E,{sx:{px:2,py:1.5,display:"flex",alignItems:"center",gap:1.5,backgroundColor:"#111",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[t.jsx(B,{onClick:G,sx:{color:"#fff"},size:"small",children:t.jsx(ht,{fontSize:"small"})}),t.jsx(B,{onClick:()=>H(-5e3),sx:{color:"#fff"},size:"small",children:t.jsx(gt,{fontSize:"small"})}),t.jsx(B,{onClick:N,sx:{color:"#fff"},size:"small",children:m?t.jsx(Ze,{fontSize:"small"}):t.jsx(et,{fontSize:"small"})}),t.jsx(B,{onClick:()=>H(5e3),sx:{color:"#fff"},size:"small",children:t.jsx(mt,{fontSize:"small"})}),t.jsx(E,{sx:{flex:1,mx:1},children:t.jsx(Bt,{variant:"determinate",value:V,sx:{height:6,borderRadius:3,backgroundColor:"rgba(255,255,255,0.12)","& .MuiLinearProgress-bar":{backgroundColor:"#6c5ce7"}}})}),t.jsxs(D,{variant:"caption",color:"#fff",children:[Math.round(F/1e3),"s / ",Math.round(x/1e3),"s"]})]})]})}function So({sessionId:e,playbackUrl:o}){const s=l.useRef(null),i=l.useRef(null),[x,u]=l.useState(!1),[F,y]=l.useState(0),[m,T]=l.useState(0),[N,G]=l.useState(1),[H,V]=l.useState(!1),[d,c]=l.useState(!1),[L,h]=l.useState(!0),[M,P]=l.useState(null);l.useEffect(()=>{const g=s.current;if(!g)return;const k=()=>{T(g.duration),h(!1),console.log("[MP4Player] Video metadata loaded, duration:",g.duration)},r=()=>{y(g.currentTime)},f=()=>{u(!0)},R=()=>{u(!1)},S=()=>{u(!1),y(0)},ee=()=>{P("视频加载失败"),h(!1),console.error("[MP4Player] Video error:",g.error)},z=()=>{c(!!document.fullscreenElement)};return g.addEventListener("loadedmetadata",k),g.addEventListener("timeupdate",r),g.addEventListener("play",f),g.addEventListener("pause",R),g.addEventListener("ended",S),g.addEventListener("error",ee),document.addEventListener("fullscreenchange",z),()=>{g.removeEventListener("loadedmetadata",k),g.removeEventListener("timeupdate",r),g.removeEventListener("play",f),g.removeEventListener("pause",R),g.removeEventListener("ended",S),g.removeEventListener("error",ee),document.removeEventListener("fullscreenchange",z)}},[]);const p=()=>{const g=s.current;g&&(x?g.pause():g.play())},j=(g,k)=>{const r=s.current;if(!r)return;const f=Array.isArray(k)?k[0]:k;r.currentTime=f,y(f)},K=(g,k)=>{const r=s.current;if(!r)return;const f=Array.isArray(k)?k[0]:k;r.volume=f,G(f),V(f===0)},I=()=>{const g=s.current;g&&(g.muted=!H,V(!H))},X=()=>{const g=i.current;g&&(d?document.exitFullscreen().catch(k=>{console.error("[MP4Player] Failed to exit fullscreen:",k)}):g.requestFullscreen().catch(k=>{console.error("[MP4Player] Failed to enter fullscreen:",k)}))},ne=g=>{const k=Math.floor(g/3600),r=Math.floor(g%3600/60),f=Math.floor(g%60);return k>0?`${k}:${r.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`:`${r}:${f.toString().padStart(2,"0")}`},Z=()=>{if(!o)return"";const g=typeof window<"u"?localStorage.getItem("token"):"";if(!g)return console.warn("[MP4Player] No token found in localStorage"),o;if(o.includes("token="))return o;const k=o.includes("?")?"&":"?",r=`${o}${k}token=${encodeURIComponent(g)}`;return console.log("[MP4Player] Video URL with token:",r.substring(0,100)+"..."),r};return t.jsxs(E,{ref:i,sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#000",position:"relative"},children:[M&&t.jsx(E,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",zIndex:10},children:t.jsx(D,{variant:"h6",children:M})}),L&&t.jsx(E,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",zIndex:10},children:t.jsx(D,{children:"加载中..."})}),t.jsx("video",{ref:s,src:Z(),style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000"},controls:!1,preload:"metadata"}),t.jsxs(E,{sx:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.7)",padding:1,display:"flex",alignItems:"center",gap:1},children:[t.jsx(B,{onClick:p,sx:{color:"#fff"},children:x?t.jsx(Ze,{}):t.jsx(et,{})}),t.jsxs(D,{variant:"body2",sx:{color:"#fff",minWidth:80},children:[ne(F)," / ",ne(m)]}),t.jsx(pt,{value:F,min:0,max:m||100,onChange:j,sx:{flex:1,color:"#fff","& .MuiSlider-thumb":{width:12,height:12}}}),t.jsx(B,{onClick:I,sx:{color:"#fff"},children:H?t.jsx(It,{}):t.jsx(At,{})}),t.jsx(pt,{value:H?0:N,min:0,max:1,step:.01,onChange:K,sx:{width:100,color:"#fff","& .MuiSlider-thumb":{width:12,height:12}}}),t.jsx(B,{onClick:X,sx:{color:"#fff"},children:d?t.jsx(Et,{}):t.jsx(Mt,{})})]})]})}function Io(){const{t:e}=zt(),[o,s]=l.useState(!0),[i,x]=l.useState([]),[u,F]=l.useState(""),[y,m]=l.useState(0),[T,N]=l.useState(10),[G,H]=l.useState(0),[V,d]=l.useState(null),[c,L]=l.useState(!1),[h,M]=l.useState(null),[P,p]=l.useState(!1),[j,K]=l.useState(!1),I=l.useCallback(async()=>{s(!0);try{const r=await Je.getSessionRecordings({page:y+1,pageSize:T,search:u}),f=r.sessions.map(R=>({id:R.id,sessionId:R.sessionId,hostName:R.hostName||R.hostIp||"Unknown",hostIp:R.hostIp||"",username:R.username||"",startTime:new Date(R.startTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),endTime:R.endTime?new Date(R.endTime).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"",duration:(R.status==="active"?"active":"closed")==="closed"&&(!R.duration||R.duration==="进行中"||R.duration==="???")?"-":R.duration||"-",commandCount:R.commandCount||0,status:R.status==="active"?"active":"closed",connectionType:R.connectionType||"ssh_client",recording:R.recording||""}));x(f),H(r.total),s(!1)}catch(r){console.error("Failed to load sessions:",r),x([]),H(0),s(!1)}},[y,T,u]),X=async r=>{if(confirm(`${e("sessions.terminateConfirm")} ${r.sessionId.substring(0,8)}...?`))try{await Je.terminateSession(r.sessionId),alert(e("sessions.terminateConfirm")),I()}catch(f){console.error("Failed to terminate session:",f),alert(e("sessions.terminate")+" failed: "+f.message)}};l.useEffect(()=>{I()},[I]);const ne=async r=>{if(r.status==="active"){alert(e("sessions.sessionActiveAlert"));return}d(r),L(!0),K(!1),p(!0),M(null);try{const f=await Je.getSessionRecording(r.sessionId);M({...f,connectionType:f.connectionType||r.connectionType}),p(!1)}catch(f){console.error("Failed to load recording:",f),p(!1),alert(e("sessions.loadRecordingFailedAlert"))}},Z=()=>{L(!1),K(!1),d(null),M(null)},g=()=>{console.log("[Sessions] Dialog animation completed"),console.log("[Sessions] loadingRecording:",P),console.log("[Sessions] recordingDetail:",h?"exists":"null"),console.log("[Sessions] playingSession:",V?"exists":"null"),K(!0)},k=i.filter(r=>r.hostName.toLowerCase().includes(u.toLowerCase())||r.username.toLowerCase().includes(u.toLowerCase())||r.sessionId.toLowerCase().includes(u.toLowerCase()));return o?t.jsx(E,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(Se,{})}):t.jsxs(E,{children:[t.jsxs(E,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[t.jsx(D,{variant:"h4",component:"h1",children:e("sessions.replayTitle")}),t.jsx(B,{onClick:I,color:"primary",children:t.jsx(Dt,{})})]}),t.jsx(nt,{elevation:0,sx:{mb:3,border:"1px solid #e2e8f0"},children:t.jsx(rt,{children:t.jsx(Ft,{placeholder:e("common.search")+"...",value:u,onChange:r=>F(r.target.value),size:"small",fullWidth:!0,InputProps:{startAdornment:t.jsx(Ht,{position:"start",children:t.jsx($t,{})})}})})}),t.jsx(nt,{elevation:0,sx:{border:"1px solid #e2e8f0"},children:t.jsxs(rt,{sx:{p:0},children:[t.jsxs(E,{sx:{px:3,py:2.5,borderBottom:"1px solid #e2e8f0"},children:[t.jsx(D,{variant:"h6",fontWeight:"600",color:"text.primary",children:e("sessions.title")}),t.jsx(D,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:e("common.totalRecords",{count:G})})]}),t.jsx(Ut,{children:t.jsxs(Yt,{children:[t.jsx(Kt,{children:t.jsxs(it,{children:[t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.sessionId")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.host")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.user")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.startTime")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.endTime")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.duration")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("sessions.commandCount")}),t.jsx(W,{sx:{fontWeight:700,color:"#667eea"},children:e("common.status")}),t.jsx(W,{align:"center",sx:{fontWeight:700,color:"#667eea"},children:e("common.actions")})]})}),t.jsx(qt,{children:k.map(r=>t.jsxs(it,{hover:!0,sx:{transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(102, 126, 234, 0.05)"}},children:[t.jsx(W,{children:t.jsx(Nt,{title:r.sessionId,placement:"top",children:t.jsxs(D,{variant:"caption",fontFamily:"monospace",sx:{fontSize:"0.75rem"},children:[r.sessionId.substring(0,20),"..."]})})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",fontWeight:500,children:r.hostIp})}),t.jsx(W,{children:t.jsx(Me,{label:r.username,size:"small",sx:{backgroundColor:"rgba(102, 126, 234, 0.1)",color:"#667eea"}})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",color:"text.secondary",children:r.startTime})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",color:"text.secondary",children:r.endTime||"-"})}),t.jsx(W,{children:t.jsx(D,{variant:"body2",fontWeight:500,children:r.duration})}),t.jsx(W,{children:t.jsx(Me,{label:r.commandCount,size:"small",sx:{backgroundColor:"#faf5ff",color:"#805ad5",fontWeight:600}})}),t.jsx(W,{children:r.status==="active"?t.jsx(Me,{label:e("common.inProgress"),size:"small",sx:{backgroundColor:"#ebf8ff",color:"#3182ce"}}):t.jsx(Me,{label:e("common.completed"),size:"small",sx:{backgroundColor:"#f0f0f0",color:"#718096"}})}),t.jsx(W,{align:"center",children:t.jsx(E,{display:"flex",gap:1,justifyContent:"center",children:r.status==="active"?t.jsx(B,{color:"error",onClick:()=>X(r),title:e("sessions.terminate"),children:t.jsx(Vt,{})}):t.jsx(B,{color:"primary",onClick:()=>ne(r),title:e("sessions.replay"),children:t.jsx(st,{})})})})]},r.id))})]})}),G>0&&t.jsx(Xt,{component:"div",count:G,page:y,onPageChange:(r,f)=>m(f),rowsPerPage:T,onRowsPerPageChange:r=>{N(parseInt(r.target.value,10)),m(0)},labelRowsPerPage:`${e("common.rowsPerPage")}:`})]})}),t.jsxs(Ot,{open:c,onClose:Z,maxWidth:"lg",fullWidth:!0,TransitionProps:{onEntered:g},PaperProps:{sx:{height:"auto",maxHeight:"90vh",display:"flex",flexDirection:"column"}},children:[t.jsxs(Gt,{sx:{borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",py:1.5,flexShrink:0},children:[t.jsxs(E,{display:"flex",alignItems:"baseline",gap:2,children:[t.jsx(D,{variant:"h6",children:e("sessions.replayTitle")}),V&&t.jsxs(D,{variant:"caption",color:"text.secondary",children:[V.hostName," (",V.hostIp,") - ",V.username]})]}),t.jsx(B,{onClick:Z,sx:{color:"text.secondary","&:hover":{color:"error.main",backgroundColor:"rgba(211, 47, 47, 0.08)"}},title:e("common.close"),children:t.jsx(Wt,{})})]}),t.jsx(_t,{sx:{p:0,backgroundColor:"#000",display:"flex",flexDirection:"column",height:"650px",maxHeight:"70vh",overflow:"hidden"},children:(()=>{if(console.log("[Sessions] Rendering DialogContent:",{loadingRecording:P,dialogReady:j,hasRecordingDetail:!!h,hasPlayingSession:!!V}),P)return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",children:[t.jsx(Se,{sx:{color:"#667eea",mb:2}}),t.jsx(D,{color:"white",children:e("sessions.loadingRecording")})]});if(!j)return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",children:[t.jsx(Se,{sx:{color:"#667eea",mb:2}}),t.jsx(D,{color:"white",children:e("sessions.preparingPlayer")})]});const r=h?.type||(h?.connectionType==="rdp"?"mp4":null),f=h?.status||"ready",R=typeof window<"u"?localStorage.getItem("token"):"";let S=h?.src||(h?.connectionType==="rdp"?`/api/sessions/recordings/${h.sessionId}/file`:null);if(S&&R&&!S.includes("token=")){const ee=S.includes("?")?"&":"?";S=`${S}${ee}token=${encodeURIComponent(R)}`}if(h){if(h?.connectionType==="rdp"){if(f==="not_found")return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",sx:{color:"#fff"},children:[t.jsx(D,{variant:"h6",sx:{mb:2},children:e("sessions.recordingNotFound")}),t.jsx(D,{variant:"body2",color:"text.secondary",children:e("sessions.recordingNotFoundDesc")})]});if(f==="converting")return t.jsxs(E,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",sx:{color:"#fff"},children:[t.jsx(Se,{sx:{color:"#667eea",mb:2}}),t.jsx(D,{variant:"h6",sx:{mb:1},children:e("sessions.recordingConverting")}),t.jsx(D,{variant:"body2",color:"text.secondary",children:e("sessions.recordingConvertingDesc")})]});if(r==="mp4"&&S)return t.jsx(So,{sessionId:h.sessionId,playbackUrl:S})}return r==="guacamole"&&S?t.jsx(ko,{sessionId:h.sessionId,playbackUrl:S}):(console.log("[Sessions] Rendering AsciinemaPlayer with:",{sessionId:h.sessionId,recordingLength:h.recording?.length||0,cols:h.terminalCols,rows:h.terminalRows}),t.jsx(vo,{sessionId:h.sessionId,recording:h.recording,cols:h.terminalCols,rows:h.terminalRows}))}return V?t.jsxs(E,{sx:{textAlign:"center",py:10},children:[t.jsx(st,{sx:{fontSize:80,color:"#667eea",mb:2}}),t.jsx(D,{variant:"h6",color:"white",gutterBottom:!0,children:e("sessions.loadRecordingFailed")}),t.jsxs(D,{variant:"body2",color:"rgba(255,255,255,0.7)",children:[e("sessions.sessionId"),": ",V.sessionId]})]}):null})()})]})]})}export{Io as default};
